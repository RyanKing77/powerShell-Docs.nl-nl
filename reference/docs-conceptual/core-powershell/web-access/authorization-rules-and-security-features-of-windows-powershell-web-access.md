---
ms.date: 06/27/2017
keywords: PowerShell-cmdlet
title: Autorisatieregels en beveiligingsfuncties van Windows PowerShell-internettoegang
ms.openlocfilehash: e9bed3900263a51b1b8236a3c3430154a5d11886
ms.sourcegitcommit: 31a221d982305c7f999b1afeb15e3629e9620de8
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/10/2018
ms.locfileid: "43133852"
---
# <a name="authorization-rules-and-security-features-of-windows-powershell-web-access"></a><span data-ttu-id="2df61-103">Autorisatieregels en beveiligingsfuncties van Windows PowerShell-internettoegang</span><span class="sxs-lookup"><span data-stu-id="2df61-103">Authorization Rules and Security Features of Windows PowerShell Web Access</span></span>

<span data-ttu-id="2df61-104">Bijgewerkt: 24: juni 2013</span><span class="sxs-lookup"><span data-stu-id="2df61-104">Updated: June 24, 2013</span></span>

<span data-ttu-id="2df61-105">Van toepassing op: Windows Server 2012 R2, WindowsServer 2012</span><span class="sxs-lookup"><span data-stu-id="2df61-105">Applies To: Windows Server 2012 R2, Windows Server 2012</span></span>

<span data-ttu-id="2df61-106">Windows PowerShell-webtoegang in Windows Server 2012 R2 en Windows Server 2012 heeft een beperkend beveiligingsmodel.</span><span class="sxs-lookup"><span data-stu-id="2df61-106">Windows PowerShell Web Access in Windows Server 2012 R2 and Windows Server 2012 has a restrictive security model.</span></span> <span data-ttu-id="2df61-107">Gebruikers moeten expliciet toegang worden verleend voordat ze kunnen zich aanmelden bij de Windows PowerShell Web Access-gateway en het web gebaseerde Windows PowerShell-console gebruiken.</span><span class="sxs-lookup"><span data-stu-id="2df61-107">Users must explicitly be granted access before they can sign in to the Windows PowerShell Web Access gateway and use the web-based Windows PowerShell console.</span></span>

## <a name="configuring-authorization-rules-and-site-security"></a><span data-ttu-id="2df61-108">Autorisatieregels en sitebeveiliging configureren</span><span class="sxs-lookup"><span data-stu-id="2df61-108">Configuring authorization rules and site security</span></span>

<span data-ttu-id="2df61-109">Nadat Windows PowerShell-webtoegang is geïnstalleerd en de gateway is geconfigureerd, wordt gebruikers de aanmeldingspagina in een browser kunnen openen, maar ze pas aanmelden nadat de Windows PowerShell Web Access-beheerder gebruikers toegang expliciet verleent.</span><span class="sxs-lookup"><span data-stu-id="2df61-109">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span> <span data-ttu-id="2df61-110">'Windows PowerShell Web Access'-toegangsbeheer wordt beheerd met behulp van de set Windows PowerShell-cmdlets die in de volgende tabel beschreven.</span><span class="sxs-lookup"><span data-stu-id="2df61-110">'Windows PowerShell Web Access' access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span> <span data-ttu-id="2df61-111">Er is geen vergelijkbare grafische gebruikersinterface voor het toevoegen of beheren van autorisatieregels.</span><span class="sxs-lookup"><span data-stu-id="2df61-111">There is no comparable GUI for adding or managing authorization rules.</span></span>
<span data-ttu-id="2df61-112">Zie [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md).</span><span class="sxs-lookup"><span data-stu-id="2df61-112">See [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md).</span></span>

<span data-ttu-id="2df61-113">Beheerders kunnen definiëren `{0-n}` -verificatieregels voor Windows PowerShell-webtoegang.</span><span class="sxs-lookup"><span data-stu-id="2df61-113">Administrators can define `{0-n}` authentication rules for Windows PowerShell Web Access.</span></span> <span data-ttu-id="2df61-114">De standaardbeveiliging is beperkend, niet toelatend. Als er geen verificatieregels zijn, heeft geen enkele gebruiker toegang tot iets.</span><span class="sxs-lookup"><span data-stu-id="2df61-114">The default security is restrictive rather than permissive; zero authentication rules means no users have access to anything.</span></span>

<span data-ttu-id="2df61-115">[Add-PswaAuthorizationRule](cmdlets/add-pswaauthorizationrule.md) en [Test-PswaAuthorizationRule](cmdlets/test-pswaauthorizationrule.md) in Windows Server 2012 R2 bevatten de parameter Credential waarmee u kunt toevoegen en autorisatieregels van Windows PowerShell-internettoegang vanaf een externe testen computer, of uit binnen een actieve sessie van de Windows PowerShell-webtoegang.</span><span class="sxs-lookup"><span data-stu-id="2df61-115">[Add-PswaAuthorizationRule](cmdlets/add-pswaauthorizationrule.md) and [Test-PswaAuthorizationRule](cmdlets/test-pswaauthorizationrule.md) in Windows Server 2012 R2 include a Credential parameter that allows you to add and test Windows PowerShell Web Access authorization rules from a remote computer, or from within an active Windows PowerShell Web Access session.</span></span> <span data-ttu-id="2df61-116">Als kunt andere Windows PowerShell-cmdlets waarvoor de parameter Credential, u een PSCredential-object opgeven als de waarde van de parameter.</span><span class="sxs-lookup"><span data-stu-id="2df61-116">As with other Windows PowerShell cmdlets that have a Credential parameter, you can specify a PSCredential object as the value of the parameter.</span></span> <span data-ttu-id="2df61-117">Voer voor het maken van een PSCredential-object met de referenties die u wilt doorgeven aan een externe computer de [Get-Credential](/powershell/module/microsoft.powershell.security/Get-Credential) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="2df61-117">To create a PSCredential object that contains credentials you want to pass to a remote computer, run the [Get-Credential](/powershell/module/microsoft.powershell.security/Get-Credential) cmdlet.</span></span>

<span data-ttu-id="2df61-118">Windows PowerShell Web Access-verificatieregels zijn regels die bepaalde verbindingen.</span><span class="sxs-lookup"><span data-stu-id="2df61-118">Windows PowerShell Web Access authentication rules are whitelist rules.</span></span> <span data-ttu-id="2df61-119">Elke regel is een definitie van een toegestane verbinding tussen gebruikers, doelcomputers en bepaalde Windows-PowerShellÂ [sessieconfiguraties](/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configurations) (ook wel eindpunten of _runspaces_) op opgegeven doelcomputers.</span><span class="sxs-lookup"><span data-stu-id="2df61-119">Each rule is a definition of an allowed connection between users, target computers, and particular Windows PowerShellÂ [session configurations](/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configurations) (also referred to as endpoints or _runspaces_) on specified target computers.</span></span>
<span data-ttu-id="2df61-120">Voor een uitleg op **runspaces** Zie [begin gebruik van PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span><span class="sxs-lookup"><span data-stu-id="2df61-120">For an explanation on **runspaces** see [Beginning Use of PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2df61-121">Voor een gebruiker hoeft slechts één regel waar te zijn om ervoor te zorgen dat hij of zij toegang krijgt.</span><span class="sxs-lookup"><span data-stu-id="2df61-121">A user needs only one rule to be true to get access.</span></span> <span data-ttu-id="2df61-122">Als een gebruiker toegang tot een computer met volledige taaltoegang of alleen toegang tot Windows PowerShell-cmdlets voor extern beheer, van de webconsole krijgt, kunt de gebruiker aanmelden (of hop) op andere computers die zijn verbonden met de eerste doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-122">If a user is given access to one computer with either full language access or access only to Windows PowerShell remote management cmdlets, from the web-based console, the user can log on (or hop) to other computers that are connected to the first target computer.</span></span> <span data-ttu-id="2df61-123">Er is de veiligste manier om Windows PowerShell-webtoegang configureren zodat gebruikers alleen toegang tot beperkte sessieconfiguraties waarmee ze specifieke taken die ze normaal gesproken nodig hebben om uit te voeren op afstand.</span><span class="sxs-lookup"><span data-stu-id="2df61-123">The most secure way to configure Windows PowerShell Web Access is to allow users access only to constrained session configurations that allow them to accomplish specific tasks that they normally need to perform remotely.</span></span>

<span data-ttu-id="2df61-124">De cmdlets waarnaar wordt verwezen in [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md) toestaan om te maken van een reeks toegangsregels die worden gebruikt voor het autoriseren van een gebruiker op de Windows PowerShell Web Access-gateway.</span><span class="sxs-lookup"><span data-stu-id="2df61-124">The cmdlets referenced in [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md) allow to create a set of access rules which are used to authorize a user on the Windows PowerShell Web Access gateway.</span></span> <span data-ttu-id="2df61-125">De regels verschillen van de toegangsbeheerlijsten (ACL’s) op de doelcomputer en bieden een extra beveiligingslaag voor internettoegang.</span><span class="sxs-lookup"><span data-stu-id="2df61-125">The rules are different from the access control lists (ACLs) on the destination computer, and provide an additional layer of security for web access.</span></span> <span data-ttu-id="2df61-126">Meer informatie over beveiliging vindt u in het volgende gedeelte.</span><span class="sxs-lookup"><span data-stu-id="2df61-126">More details about security are described in the following section.</span></span>

<span data-ttu-id="2df61-127">Als gebruikers niet een van de voorgaande beveiligingslagen worden doorgegeven, ontvangen ze een algemeen 'toegang geweigerd'-bericht in hun browservensters.</span><span class="sxs-lookup"><span data-stu-id="2df61-127">If users cannot pass any of the preceding security layers, they receive a generic 'access denied' message in their browser windows.</span></span> <span data-ttu-id="2df61-128">Hoewel beveiligingsgegevens worden geregistreerd op de gatewayserver, zien eindgebruikers geen informatie over hoeveel beveiligingslagen ze zijn gepasseerd of op welke laag de aanmeldings- of verificatiefout is opgetreden.</span><span class="sxs-lookup"><span data-stu-id="2df61-128">Although security details are logged on the gateway server, end users are not shown information about how many security layers they passed, or at which layer the sign-in or authentication failure occurred.</span></span>

<span data-ttu-id="2df61-129">Zie voor meer informatie over het configureren van autorisatieregels [autorisatieregels configureren](#configuring-authorization-rules-and-site-security) in dit onderwerp.</span><span class="sxs-lookup"><span data-stu-id="2df61-129">For more information about configuring authorization rules, see [configuring authorization rules](#configuring-authorization-rules-and-site-security) in this topic.</span></span>

### <a name="security"></a><span data-ttu-id="2df61-130">Beveiliging</span><span class="sxs-lookup"><span data-stu-id="2df61-130">Security</span></span>

<span data-ttu-id="2df61-131">Het beveiligingsmodel van Windows PowerShell-webtoegang bevinden zich vier lagen tussen een eindgebruiker van de webconsole en een doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-131">The Windows PowerShell Web Access security model has four layers between an end user of the web-based console, and a target computer.</span></span> <span data-ttu-id="2df61-132">Windows PowerShell Web Access-beheerders kunnen beveiligingslagen toevoegen via aanvullende configuratie in de IIS-beheerconsole.</span><span class="sxs-lookup"><span data-stu-id="2df61-132">Windows PowerShell Web Access administrators can add security layers through additional configuration in the IIS Manager console.</span></span> <span data-ttu-id="2df61-133">Zie voor meer informatie over het beveiligen van websites in de IIS-beheerconsole, [Configure Web Server Security (IIS7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="2df61-133">For more information about securing websites in the IIS Manager console, see [Configure Web Server Security (IIS7)](https://technet.microsoft.com/library/cc731278).</span></span>

<span data-ttu-id="2df61-134">Voor meer informatie over IIS best practices en voorkomen van denial-of-service-aanvallen, Zie [Best Practices voor om te voorkomen dat DoS/tot denial of Service-aanvallen](https://technet.microsoft.com/library/cc750213).</span><span class="sxs-lookup"><span data-stu-id="2df61-134">For more information about IIS best practices and preventing denial-of-service attacks, see [Best Practices for Preventing DoS/Denial of Service Attacks](https://technet.microsoft.com/library/cc750213).</span></span>
<span data-ttu-id="2df61-135">Een beheerder kan ook kopen en aanvullende retail verificatiesoftware installeren.</span><span class="sxs-lookup"><span data-stu-id="2df61-135">An administrator can also buy and install additional retail authentication software.</span></span>

<span data-ttu-id="2df61-136">In de volgende tabel worden de vier beveiligingslagen tussen eindgebruikers en doelcomputers beschreven.</span><span class="sxs-lookup"><span data-stu-id="2df61-136">The following table describes the four layers of security between end users and target computers.</span></span>

|<span data-ttu-id="2df61-137">Niveau</span><span class="sxs-lookup"><span data-stu-id="2df61-137">Level</span></span>|<span data-ttu-id="2df61-138">Laag</span><span class="sxs-lookup"><span data-stu-id="2df61-138">Layer</span></span>|
|-|-|
|<span data-ttu-id="2df61-139">1</span><span class="sxs-lookup"><span data-stu-id="2df61-139">1</span></span>|[<span data-ttu-id="2df61-140">IIS web server security-functies</span><span class="sxs-lookup"><span data-stu-id="2df61-140">iis web server security features</span></span>](#iis-web-server-security-features)|
|<span data-ttu-id="2df61-141">2</span><span class="sxs-lookup"><span data-stu-id="2df61-141">2</span></span>|[<span data-ttu-id="2df61-142">Windows powershell web access op formulieren gebaseerde gatewayverificatie</span><span class="sxs-lookup"><span data-stu-id="2df61-142">windows powershell web access forms-based gateway authentication</span></span>](#windows-powershell-web-access-forms-based-gateway-authentication)|
|<span data-ttu-id="2df61-143">3</span><span class="sxs-lookup"><span data-stu-id="2df61-143">3</span></span>|[<span data-ttu-id="2df61-144">Windows powershell web access-autorisatieregels</span><span class="sxs-lookup"><span data-stu-id="2df61-144">windows powershell web access authorization rules</span></span>](#windows-powershell-web-access-authorization-rules)|
|<span data-ttu-id="2df61-145">4</span><span class="sxs-lookup"><span data-stu-id="2df61-145">4</span></span>|[<span data-ttu-id="2df61-146">verificatie en autorisatie regels als doel</span><span class="sxs-lookup"><span data-stu-id="2df61-146">target authentication and authorization rules</span></span>](#target-authentication-and-authorization-rules)|

<span data-ttu-id="2df61-147">Gedetailleerde informatie over elke laag kan worden gevonden in de volgende rubrieken:</span><span class="sxs-lookup"><span data-stu-id="2df61-147">Detailed information about each layer can be found under the following headings:</span></span>

#### <a name="iis-web-server-security-features"></a><span data-ttu-id="2df61-148">Beveiligingsfuncties voor IIS-webserver</span><span class="sxs-lookup"><span data-stu-id="2df61-148">IIS Web Server security features</span></span>

<span data-ttu-id="2df61-149">Gebruikers van Windows PowerShell-webtoegang moeten altijd een gebruikersnaam en wachtwoord voor het verifiëren van hun accounts op de gateway opgeven.</span><span class="sxs-lookup"><span data-stu-id="2df61-149">Windows PowerShell Web Access users must always provide a user name and password to authenticate their accounts on the gateway.</span></span> <span data-ttu-id="2df61-150">Echter dat Windows PowerShell-webtoegang beheerders ook verificatie van clientcertificaten desgewenst kunnen inschakelen of uitschakelen, Zie [installeren en gebruiken van windows powershell-webtoegang](install-and-use-windows-powershell-web-access.md) om in te schakelen van een testcertificaat en hoger, het configureren van een legitiem certificaat).</span><span class="sxs-lookup"><span data-stu-id="2df61-150">However, Windows PowerShell Web Access administrators can also turn optional client certificate authentication on or off, see [install and use windows powershell web access](install-and-use-windows-powershell-web-access.md) to enable a test certificate and, later, how to configure a genuine certificate).</span></span>

<span data-ttu-id="2df61-151">De optionele functie voor clientcertificaten vereist dat eindgebruikers beschikken over een geldig clientcertificaat naast hun gebruikersnaam en wachtwoord en maakt deel uit van de webserverconfiguratie (IIS).</span><span class="sxs-lookup"><span data-stu-id="2df61-151">The optional client certificate feature requires end users to have a valid client certificate, in addition to their user names and passwords, and is part of Web Server (IIS) configuration.</span></span> <span data-ttu-id="2df61-152">Als de clientcertificaatlaag is ingeschakeld, vraagt de aanmeldingspagina van Windows PowerShell-webtoegang gebruikers een geldig certificaat voordat hun aanmeldingsreferenties worden geëvalueerd.</span><span class="sxs-lookup"><span data-stu-id="2df61-152">When the client certificate layer is enabled, the Windows PowerShell Web Access sign-in page prompts users to provide valid certificates before their sign-in credentials are evaluated.</span></span> <span data-ttu-id="2df61-153">Bij verificatie van clientcertificaten wordt het clientcertificaat automatisch gecontroleerd.</span><span class="sxs-lookup"><span data-stu-id="2df61-153">Client certificate authentication automatically checks for the client certificate.</span></span> <span data-ttu-id="2df61-154">Als een geldig certificaat niet wordt gevonden, geeft de Windows PowerShell-webtoegang gebruikers, zodat ze het certificaat kunnen verstrekken.</span><span class="sxs-lookup"><span data-stu-id="2df61-154">If a valid certificate is not found, Windows PowerShell Web Access informs users, so they can provide the certificate.</span></span> <span data-ttu-id="2df61-155">Als een geldig clientcertificaat wordt gevonden, wordt de aanmeldingspagina voor gebruikers voor hun gebruikersnamen en wachtwoorden in Windows PowerShell-webtoegang geopend.</span><span class="sxs-lookup"><span data-stu-id="2df61-155">If a valid client certificate is found, Windows PowerShell Web Access opens the sign-in page for users to provide their user names and passwords.</span></span>

<span data-ttu-id="2df61-156">Dit is een voorbeeld van aanvullende beveiligingsinstellingen die worden aangeboden via IIS-webserver.</span><span class="sxs-lookup"><span data-stu-id="2df61-156">This is one example of additional security settings that are offered by IIS Web Server.</span></span> <span data-ttu-id="2df61-157">Zie voor meer informatie over andere IIS-beveiligingsfuncties [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="2df61-157">For more information about other IIS security features, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span></span>

#### <a name="windows-powershell-web-access-forms-based-gateway-authentication"></a><span data-ttu-id="2df61-158">Windows PowerShell-webtoegang op formulieren gebaseerde gatewayverificatie</span><span class="sxs-lookup"><span data-stu-id="2df61-158">Windows PowerShell Web Access forms-based gateway authentication</span></span>

<span data-ttu-id="2df61-159">De aanmeldingspagina van Windows PowerShell-webtoegang vereist een set referenties (gebruikersnaam en wachtwoord) en biedt gebruikers de mogelijkheid andere referenties voor de doelcomputer op te geven.</span><span class="sxs-lookup"><span data-stu-id="2df61-159">The Windows PowerShell Web Access sign-in page requires a set of credentials (user name and password) and offers users the option of providing different credentials for the target computer.</span></span>
<span data-ttu-id="2df61-160">Als de gebruiker geen alternatieve referenties opgeeft, worden de primaire gebruikersnaam en het primaire wachtwoord die worden gebruikt om verbinding te maken met de gateway, ook gebruikt om verbinding te maken met de doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-160">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="2df61-161">De vereiste referenties zijn geverifieerd op de Windows PowerShell Web Access-gateway.</span><span class="sxs-lookup"><span data-stu-id="2df61-161">The required credentials are authenticated on the Windows PowerShell Web Access gateway.</span></span> <span data-ttu-id="2df61-162">Deze referenties moeten geldige gebruikersaccounts op een van beide de lokale Windows PowerShell-webtoegang gatewayserver of in Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2df61-162">These credentials must be valid user accounts on either the local Windows PowerShell Web Access gateway server, or in Active Directory.</span></span>

#### <a name="windows-powershell-web-access-authorization-rules"></a><span data-ttu-id="2df61-163">Autorisatieregels voor Windows PowerShell-webtoegang</span><span class="sxs-lookup"><span data-stu-id="2df61-163">Windows PowerShell Web Access authorization rules</span></span>

<span data-ttu-id="2df61-164">Nadat een gebruiker is geverifieerd op de gateway, controleert Windows PowerShell-webtoegang autorisatieregels om te controleren of de gebruiker toegang tot de gevraagde doelcomputer heeft.</span><span class="sxs-lookup"><span data-stu-id="2df61-164">After a user is authenticated at the gateway, Windows PowerShell Web Access checks authorization rules to verify if the user has access to the requested target computer.</span></span> <span data-ttu-id="2df61-165">Na een geslaagde autorisatie worden van de gebruiker referenties doorgegeven aan de doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-165">After successful authorization, the user's credentials are passed along to the target computer.</span></span>

<span data-ttu-id="2df61-166">Deze regels worden pas geëvalueerd nadat een gebruiker is geverifieerd door de gateway en voordat een gebruiker kan worden geverifieerd op een doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-166">These rules are evaluated only after a user has been authenticated by the gateway, and before a user can be authenticated on a target computer.</span></span>

#### <a name="target-authentication-and-authorization-rules"></a><span data-ttu-id="2df61-167">Verificatie- en autorisatieregels van de doelcomputer</span><span class="sxs-lookup"><span data-stu-id="2df61-167">Target authentication and authorization rules</span></span>

<span data-ttu-id="2df61-168">De laatste beveiligingslaag voor Windows PowerShell-webtoegang is het doel van computer-beveiligingsconfiguratie.</span><span class="sxs-lookup"><span data-stu-id="2df61-168">The final layer of security for Windows PowerShell Web Access is the target computer's own security configuration.</span></span> <span data-ttu-id="2df61-169">Gebruikers moeten de juiste toegangsrechten op de doelcomputer en ook in de Windows PowerShell Web Access-autorisatieregels geconfigureerd om uit te voeren van een Windows PowerShell web-console op basis van die van invloed op een doelcomputer via Windows PowerShell-webtoegang hebben.</span><span class="sxs-lookup"><span data-stu-id="2df61-169">Users must have the appropriate access rights configured on the target computer, and also in the Windows PowerShell Web Access authorization rules, to run a Windows PowerShell web-based console that affects a target computer through Windows PowerShell Web Access.</span></span>

<span data-ttu-id="2df61-170">Deze laag biedt dezelfde beveiligingsmechanismen die verbindingspogingen evalueren als gebruikers proberen te maken van een externe Windows PowerShell-sessie met een doelcomputer uit in Windows PowerShell door uit te voeren de [Enter-PSSession](/powershell/module/microsoft.powershell.core/Enter-PSSession) of [New-PSSession](/powershell/module/microsoft.powershell.core/new-pssession) cmdlets.</span><span class="sxs-lookup"><span data-stu-id="2df61-170">This layer offers the same security mechanisms that would evaluate connection attempts if users tried to create a remote Windows PowerShell session to a target computer from within Windows PowerShell by running the [Enter-PSSession](/powershell/module/microsoft.powershell.core/Enter-PSSession) or [New-PSSession](/powershell/module/microsoft.powershell.core/new-pssession) cmdlets.</span></span>

<span data-ttu-id="2df61-171">Standaard Windows PowerShell-webtoegang maakt gebruik van de primaire gebruikersnaam en het wachtwoord voor verificatie op zowel de gateway en de doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-171">By default, Windows PowerShell Web Access uses the primary user name and password for authentication on both the gateway and the target computer.</span></span> <span data-ttu-id="2df61-172">Het web gebaseerde aanmeldingspagina, in een sectie met de titel **optionele verbindingsinstellingen**, biedt het gebruikers de mogelijkheid om andere referenties voor de doelcomputer op te geven als ze vereist zijn.</span><span class="sxs-lookup"><span data-stu-id="2df61-172">The web-based sign-in page, in a section titled **Optional connection settings**, offers users the option of providing different credentials for the target computer, if they are required.</span></span> <span data-ttu-id="2df61-173">Als de gebruiker geen alternatieve referenties opgeeft, worden de primaire gebruikersnaam en het primaire wachtwoord die worden gebruikt om verbinding te maken met de gateway, ook gebruikt om verbinding te maken met de doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-173">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="2df61-174">Autorisatieregels kunnen worden gebruikt om gebruikers toegang te verlenen tot een bepaalde sessieconfiguratie.</span><span class="sxs-lookup"><span data-stu-id="2df61-174">Authorization rules can be used to allow users access to a particular session configuration.</span></span> <span data-ttu-id="2df61-175">U kunt maken _beperkte runspaces_ of sessieconfiguraties voor Windows PowerShell-webtoegang, en bepaalde gebruikers verbinding maken met alleen specifieke sessieconfiguraties wanneer ze zich aanmelden bij Windows PowerShell-webtoegang.</span><span class="sxs-lookup"><span data-stu-id="2df61-175">You can create _restricted runspaces_ or session configurations for Windows PowerShell Web Access, and allow specific users to connect only to specific session configurations when they sign in to Windows PowerShell Web Access.</span></span> <span data-ttu-id="2df61-176">U kunt toegangsbeheerlijsten (ACL's) gebruiken om te bepalen welke gebruikers toegang hebben tot specifieke eindpunten en de toegang tot het eindpunt voor specifieke gebruikers verder beperken met behulp van de autorisatieregels die in dit gedeelte worden beschreven.</span><span class="sxs-lookup"><span data-stu-id="2df61-176">You can use access control lists (ACLs) to determine which users have access to specific endpoints, and further restrict access to the endpoint for a specific set of users by using authorization rules described in this section.</span></span> <span data-ttu-id="2df61-177">Zie voor meer informatie over beperkte runspaces [het maken van een beperkte runspace](https://msdn.microsoft.com/library/dn614668).</span><span class="sxs-lookup"><span data-stu-id="2df61-177">For more information about restricted runspaces, see [Creating a constrained runspace](https://msdn.microsoft.com/library/dn614668).</span></span>

### <a name="configuring-authorization-rules"></a><span data-ttu-id="2df61-178">Autorisatieregels configureren</span><span class="sxs-lookup"><span data-stu-id="2df61-178">Configuring authorization rules</span></span>

<span data-ttu-id="2df61-179">Beheerders willen waarschijnlijk dezelfde autorisatieregel voor Windows PowerShell Web Access-gebruikers die al is gedefinieerd in hun omgeving voor extern beheer van Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2df61-179">Administrators likely want the same authorization rule for Windows PowerShell Web Access users that is already defined in their environment for Windows PowerShell remote management.</span></span> <span data-ttu-id="2df61-180">In de eerste procedure in dit gedeelte wordt beschreven hoe u een veilige autorisatieregel toevoegt waarmee toegang wordt verleend aan één gebruiker die zich aanmeldt om één computer te beheren en binnen één sessieconfiguratie.</span><span class="sxs-lookup"><span data-stu-id="2df61-180">The first procedure in this section describes how to add a secure authorization rule that grants access to one user, signing in to manage one computer, and within a single session configuration.</span></span> <span data-ttu-id="2df61-181">In de tweede procedure wordt beschreven hoe u een autorisatieregel verwijdert die niet meer nodig is.</span><span class="sxs-lookup"><span data-stu-id="2df61-181">The second procedure describes how to remove an authorization rule that is no longer needed.</span></span>

<span data-ttu-id="2df61-182">Als u van plan bent aangepaste sessieconfiguraties gebruiken waarmee specifieke gebruikers kunnen werken binnen beperkte runspaces in Windows PowerShell-webtoegang, maakt u uw aangepaste sessieconfiguraties voordat u autorisatieregels die ernaar verwijzen.</span><span class="sxs-lookup"><span data-stu-id="2df61-182">If you plan to use custom session configurations to allow specific users to work only within restricted runspaces in Windows PowerShell Web Access, create your custom session configurations before you add authorization rules that refer to them.</span></span> <span data-ttu-id="2df61-183">U kunt de Windows PowerShell Web Access cmdlets niet gebruiken voor aangepaste sessieconfiguraties maken.</span><span class="sxs-lookup"><span data-stu-id="2df61-183">You cannot use the Windows PowerShell Web Access cmdlets to create custom session configurations.</span></span> <span data-ttu-id="2df61-184">Zie voor meer informatie over het maken van aangepaste sessieconfiguraties [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="2df61-184">For more information about creating custom session configurations, see [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

<span data-ttu-id="2df61-185">Windows PowerShell Web Access cmdlets ondersteunen één jokerteken, een sterretje ( \* ).</span><span class="sxs-lookup"><span data-stu-id="2df61-185">Windows PowerShell Web Access cmdlets support one wildcard character, an asterisk ( \* ).</span></span> <span data-ttu-id="2df61-186">Jokertekens binnen tekenreeksen worden niet ondersteund. Gebruik één sterretje per eigenschap (gebruikers, computers of sessieconfiguraties).</span><span class="sxs-lookup"><span data-stu-id="2df61-186">Wildcard characters within strings are not supported; use a single asterisk per property (users, computers, or session configurations).</span></span>

> [!NOTE]
> <span data-ttu-id="2df61-187">Voor meer manieren waarop u autorisatieregels kunt gebruiken voor toegang verlenen aan gebruikers en voor het beveiligen van de Windows PowerShell Web Access-omgeving, [andere voorbeelden van scenario autorisatie](#other-authorization-rule-scenario-examples) in dit onderwerp.</span><span class="sxs-lookup"><span data-stu-id="2df61-187">For more ways you can use authorization rules to grant access to users and help secure the Windows PowerShell Web Access environment, see [other authorization rule scenario examples](#other-authorization-rule-scenario-examples) in this topic.</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="2df61-188">Een beperkende autorisatieregel toevoegen</span><span class="sxs-lookup"><span data-stu-id="2df61-188">To add a restrictive authorization rule</span></span>

1. <span data-ttu-id="2df61-189">Doe het volgende om een Windows PowerShell-sessie met verhoogde gebruikersrechten te openen.</span><span class="sxs-lookup"><span data-stu-id="2df61-189">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

   - <span data-ttu-id="2df61-190">Het Windows-bureaublad met de rechtermuisknop op **Windows PowerShell** op de taakbalk en klik vervolgens op **als Administrator uitvoeren**.</span><span class="sxs-lookup"><span data-stu-id="2df61-190">On the Windows desktop, right-click **Windows PowerShell** on the taskbar, and then click **Run as Administrator**.</span></span>

   - <span data-ttu-id="2df61-191">Op de Windows **Start** met de rechtermuisknop op **Windows PowerShell**, en klik vervolgens op **als Administrator uitvoeren**.</span><span class="sxs-lookup"><span data-stu-id="2df61-191">On the Windows **Start** screen, right-click **Windows PowerShell**, and then click **Run as Administrator**.</span></span>

2. <span data-ttu-id="2df61-192">**Optionele stap** voor het beperken van toegang voor gebruikers met behulp van sessieconfiguraties:</span><span class="sxs-lookup"><span data-stu-id="2df61-192">**Optional step** For restricting user access by using session configurations:</span></span>

   <span data-ttu-id="2df61-193">Controleer of de sessieconfiguraties die u wilt gebruiken, al bestaan in uw regels.</span><span class="sxs-lookup"><span data-stu-id="2df61-193">Verify that the session configurations that you want to use, already exist in your rules .</span></span>

   <span data-ttu-id="2df61-194">Als ze zijn nog geen is gemaakt, gebruikt u instructies voor het maken van sessieconfiguraties in [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="2df61-194">If they have not yet been created, use instructions for creating session configurations in [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

3. <span data-ttu-id="2df61-195">Deze autorisatieregel verleent een bepaalde gebruikerstoegang tot een computer op het netwerk waartoe ze gewoonlijk toegang hebben, met toegang tot een bepaalde sessieconfiguratie die is afgestemd op de gebruiker '™ s typische scripting en cmdlet-behoeften.</span><span class="sxs-lookup"><span data-stu-id="2df61-195">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the user'™s typical scripting and cmdlet needs.</span></span> <span data-ttu-id="2df61-196">Typ het volgende en druk vervolgens op **Enter**.</span><span class="sxs-lookup"><span data-stu-id="2df61-196">Type the following, and then press **Enter**.</span></span>

   ```
   Add-PswaAuthorizationRule -UserName <domain\user | computer\user> `
      -ComputerName <computer_name> -ConfigurationName <session_configuration_name>
   ```

   - <span data-ttu-id="2df61-197">In het volgende voorbeeld wordt een gebruiker met de naam _JSmith_ in de _Contoso_ domein krijgt toegangsrechten voor het beheren van de computer _Contoso_214_, en de sessieconfiguratie van een met de naam gebruiken _NewAdminsOnly_.</span><span class="sxs-lookup"><span data-stu-id="2df61-197">In the following example, a user named _JSmith_ in the _Contoso_ domain is granted access to manage the computer _Contoso_214_, and use a session configuration named _NewAdminsOnly_.</span></span>

   ```powershell
   Add-PswaAuthorizationRule -UserName 'Contoso\JSmith' `
      -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly
   ```

4. <span data-ttu-id="2df61-198">Controleer of dat de regel is gemaakt door de **Get-PswaAuthorizationRule** -cmdlet of `Test-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName** <computer_name>`.</span><span class="sxs-lookup"><span data-stu-id="2df61-198">Verify that the rule has been created by running either the **Get-PswaAuthorizationRule** cmdlet, or `Test-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName** <computer_name>`.</span></span>
   <span data-ttu-id="2df61-199">Voorbeeld: `Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214`.</span><span class="sxs-lookup"><span data-stu-id="2df61-199">For example, `Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214`.</span></span>

#### <a name="to-remove-an-authorization-rule"></a><span data-ttu-id="2df61-200">Een autorisatieregel verwijderen</span><span class="sxs-lookup"><span data-stu-id="2df61-200">To remove an authorization rule</span></span>

1. <span data-ttu-id="2df61-201">Als een Windows PowerShell-sessie nog niet is geopend, raadpleegt u stap 1 van [om toe te voegen een beperkende autorisatieregel](#to-add-a-restrictive-authorization-rule) in deze sectie.</span><span class="sxs-lookup"><span data-stu-id="2df61-201">If a Windows PowerShell session is not already open, see step 1 of [to add a restrictive authorization rule](#to-add-a-restrictive-authorization-rule) in this section.</span></span>

2. <span data-ttu-id="2df61-202">Typ het volgende en druk vervolgens op **Enter**, waarbij *regel-ID* vertegenwoordigt de unieke id van de regel die u wilt verwijderen.</span><span class="sxs-lookup"><span data-stu-id="2df61-202">Type the following, and then press **Enter**, where *rule ID* represents the unique ID number of the rule that you want to remove.</span></span>

   ```
   Remove-PswaAuthorizationRule -ID <rule ID>
   ```

   <span data-ttu-id="2df61-203">Als u de id van de regel die u wilt verwijderen niet kent maar wel de beschrijvende naam, kunt u de naam van de regel doorgeven aan de cmdlet `Remove-PswaAuthorizationRule` om de regel te verwijderen, zoals in het volgende voorbeeld:</span><span class="sxs-lookup"><span data-stu-id="2df61-203">Alternatively, if you do not know the ID number, but know the friendly name of the rule you want to remove, you can get the name of the rule, and pipe it to the `Remove-PswaAuthorizationRule` cmdlet to remove the rule, as shown in the following example:</span></span>

   ```
   Get-PswaAuthorizationRule `
      -RuleName <rule-name> | Remove-PswaAuthorizationRule
   ```

> [!NOTE]
> <span data-ttu-id="2df61-204">U wordt niet gevraagd om te bevestigen of u wilt verwijderen van de opgegeven autorisatieregel; de regel wordt verwijderd wanneer u op de toets **Enter**.</span><span class="sxs-lookup"><span data-stu-id="2df61-204">You are not prompted to confirm whether you want to delete the specified authorization rule; the rule is deleted when you press **Enter**.</span></span> <span data-ttu-id="2df61-205">Wees er zeker van dat u de autorisatieregel wilt verwijderen voordat u de cmdlet `Remove-PswaAuthorizationRule` uitvoert.</span><span class="sxs-lookup"><span data-stu-id="2df61-205">Be sure that you want to remove the authorization rule before running the `Remove-PswaAuthorizationRule` cmdlet.</span></span>

#### <a name="other-authorization-rule-scenario-examples"></a><span data-ttu-id="2df61-206">Andere voorbeeldscenario’s met autorisatieregels</span><span class="sxs-lookup"><span data-stu-id="2df61-206">Other authorization rule scenario examples</span></span>

<span data-ttu-id="2df61-207">Elke Windows PowerShell-sessie gebruikt een sessieconfiguratie; Als deze niet voor een sessie opgegeven is, Windows PowerShell maakt gebruik van de standaard ingebouwde Windows PowerShell, sessieconfiguratie genaamd Microsoft.PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2df61-207">Every Windows PowerShell session uses a session configuration; if one is not specified for a session, Windows PowerShell uses the default, built-in Windows PowerShell session configuration, called Microsoft.PowerShell.</span></span> <span data-ttu-id="2df61-208">De standaardsessieconfiguratie bevat alle cmdlets die beschikbaar zijn op een computer.</span><span class="sxs-lookup"><span data-stu-id="2df61-208">The default session configuration includes all cmdlets that are available on a computer.</span></span> <span data-ttu-id="2df61-209">Beheerders kunnen de toegang tot alle computers beperken door een sessieconfiguratie met een beperkte runspace (een beperkt aantal cmdlets en taken die eindgebruikers kunnen uitvoeren) te definiëren.</span><span class="sxs-lookup"><span data-stu-id="2df61-209">Administrators can restrict access to all computers by defining a session configuration with a restricted runspace (a limited range of cmdlets and tasks that their end users could perform).</span></span> <span data-ttu-id="2df61-210">Een gebruiker die toegang tot een computer met volledige taaltoegang of alleen de Windows PowerShell extern beheer-cmdlets hebben kunt verbinden met andere computers die zijn verbonden met de eerste computer.</span><span class="sxs-lookup"><span data-stu-id="2df61-210">A user who is granted access to one computer with either full language access or only the Windows PowerShell remote management cmdlets can connect to other computers that are connected to the first computer.</span></span> <span data-ttu-id="2df61-211">Een beperkte runspace te definiëren kan voorkomen dat gebruikers toegang krijgen tot andere computers vanuit hun toegestane Windows PowerShell-runspace en verbetert de beveiliging van uw Windows PowerShell Web Access-omgeving.</span><span class="sxs-lookup"><span data-stu-id="2df61-211">Defining a restricted runspace can prevent users from accessing other computers from their allowed Windows PowerShell runspace, and improves the security of your Windows PowerShell Web Access environment.</span></span> <span data-ttu-id="2df61-212">De sessieconfiguratie kan (via Groepsbeleid) worden gedistribueerd naar alle computers die beheerders toegankelijk willen maken via Windows PowerShell-webtoegang.</span><span class="sxs-lookup"><span data-stu-id="2df61-212">The session configuration can be distributed (by using Group Policy) to all computers that administrators want to make accessible through Windows PowerShell Web Access.</span></span> <span data-ttu-id="2df61-213">Zie voor meer informatie over sessieconfiguraties [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span><span class="sxs-lookup"><span data-stu-id="2df61-213">For more information about session configurations, see [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span></span> <span data-ttu-id="2df61-214">Hier volgen enkele voorbeelden van dit scenario.</span><span class="sxs-lookup"><span data-stu-id="2df61-214">The following are some examples of this scenario.</span></span>

- <span data-ttu-id="2df61-215">Een beheerder maakt een eindpunt met de naam **Pswaeindpunt**, met een beperkte runspace.</span><span class="sxs-lookup"><span data-stu-id="2df61-215">An administrator creates an endpoint, called **PswaEndpoint**, with a restricted runspace.</span></span> <span data-ttu-id="2df61-216">Vervolgens, de beheerder maakt een regel, `*,*,PswaEndpoint`, en distribueert het eindpunt naar andere computers.</span><span class="sxs-lookup"><span data-stu-id="2df61-216">Then, the administrator creates a rule, `*,*,PswaEndpoint`, and distributes the endpoint to other computers.</span></span> <span data-ttu-id="2df61-217">De regel verleent alle gebruikers toegang krijgen tot alle computers met het eindpunt **Pswaeindpunt**.</span><span class="sxs-lookup"><span data-stu-id="2df61-217">The rule allows all users to access all computers with the endpoint **PswaEndpoint**.</span></span>
  <span data-ttu-id="2df61-218">Als dit de enige autorisatieregel is die is gedefinieerd in de regelset, zijn computers zonder dat eindpunt niet toegankelijk.</span><span class="sxs-lookup"><span data-stu-id="2df61-218">If this is the only authorization rule defined in the rule set, computers without that endpoint would not be accessible.</span></span>

- <span data-ttu-id="2df61-219">De beheerder wordt gemaakt van een eindpunt met een beperkte runspace met de naam **Pswaeindpunt**, en wil de toegang beperken tot specifieke gebruikers.</span><span class="sxs-lookup"><span data-stu-id="2df61-219">The administrator created an endpoint with a restricted runspace called **PswaEndpoint**,and wants to restrict access to specific users.</span></span> <span data-ttu-id="2df61-220">De beheerder maakt een groep gebruikers genaamd **Level1Support**, en definieert de volgende regel: **Level1Support,\*, Pswaeindpunt**.</span><span class="sxs-lookup"><span data-stu-id="2df61-220">The administrator creates a group of users called **Level1Support**, and defines the following rule: **Level1Support,\*,PswaEndpoint**.</span></span> <span data-ttu-id="2df61-221">De regel verleent alle gebruikers in de groep **Level1Support** toegang tot alle computers met de **Pswaeindpunt** configuratie.</span><span class="sxs-lookup"><span data-stu-id="2df61-221">The rule grants any users in the group **Level1Support** access to all computers with the **PswaEndpoint** configuration.</span></span> <span data-ttu-id="2df61-222">Op vergelijkbare wijze kan de toegang worden beperkt tot een specifieke set computers.</span><span class="sxs-lookup"><span data-stu-id="2df61-222">Similarly, access can be restricted to a specific set of computers.</span></span>

- <span data-ttu-id="2df61-223">Sommige beheerders bieden bepaalde gebruikers uitgebreidere toegang dan andere.</span><span class="sxs-lookup"><span data-stu-id="2df61-223">Some administrators provide certain users more access than others.</span></span> <span data-ttu-id="2df61-224">Een beheerder maakt bijvoorbeeld twee gebruikersgroepen, **beheerders** en **basisondersteuning**.</span><span class="sxs-lookup"><span data-stu-id="2df61-224">For example, an administrator creates two user groups, **Admins** and **BasicSupport**.</span></span> <span data-ttu-id="2df61-225">De beheerder maakt ook een eindpunt met een beperkte runspace met de naam **Pswaeindpunt**, en definieert de volgende twee regels: **beheerders,\*,\***  en  **Basisondersteuning,\*, Pswaeindpunt**.</span><span class="sxs-lookup"><span data-stu-id="2df61-225">The administrator also creates an endpoint with a restricted runspace called **PswaEndpoint**, and defines the following two rules: **Admins,\*,\*** and **BasicSupport,\*,PswaEndpoint**.</span></span> <span data-ttu-id="2df61-226">De eerste regel biedt alle gebruikers in de **Admin** groepstoegang tot alle computers en de tweede regel biedt alle gebruikers in de **basisondersteuning** groep alleen toegang tot computers met  **Pswaeindpunt**.</span><span class="sxs-lookup"><span data-stu-id="2df61-226">The first rule provides all users in the **Admin** group access to all computers, and the second rule provides all users in the **BasicSupport** group access only to those computers with **PswaEndpoint**.</span></span>

- <span data-ttu-id="2df61-227">Een beheerder heeft een besloten testomgeving ingesteld en wil alle geautoriseerde netwerkgebruikers toegang geven tot alle computers in het netwerk waartoe ze gewoonlijk toegang hebben, met toegang tot alle sessieconfiguraties waartoe ze gewoonlijk toegang hebben.</span><span class="sxs-lookup"><span data-stu-id="2df61-227">An administrator has set up a private test environment, and wants to allow all authorized network users access to all computers on the network to which they typically have access, with access to all session configurations to which they typically have access.</span></span> <span data-ttu-id="2df61-228">Omdat dit een besloten testomgeving is, maakt de beheerder een autorisatieregel die niet veilig is.</span><span class="sxs-lookup"><span data-stu-id="2df61-228">Because this is a private test environment, the administrator creates an authorization rule that is not secure.</span></span> <span data-ttu-id="2df61-229">-De beheerder voert de cmdlet `Add-PswaAuthorizationRule * * *`, waarin het jokerteken **\*** om weer te geven van alle gebruikers, alle computers en alle configuraties.</span><span class="sxs-lookup"><span data-stu-id="2df61-229">- The administrator runs the cmdlet `Add-PswaAuthorizationRule * * *`, which uses the wildcard character **\*** to represent all users, all computers, and all configurations.</span></span> <span data-ttu-id="2df61-230">-Met deze regel is het equivalent van de volgende opties: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span><span class="sxs-lookup"><span data-stu-id="2df61-230">- This rule is the equivalent of the following: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span></span>

  > [!NOTE]
  > <span data-ttu-id="2df61-231">Deze regel wordt niet aangeraden in een beveiligde omgeving en omzeilt de beveiligingslaag autorisatie van de beveiliging van Windows PowerShell-webtoegang.</span><span class="sxs-lookup"><span data-stu-id="2df61-231">This rule is not recommended in a secure environment, and bypasses the authorization rule layer of security provided by Windows PowerShell Web Access.</span></span>

- <span data-ttu-id="2df61-232">Een beheerder moet gebruikers toestaan verbinding te maken met doelcomputers in een omgeving met zowel werkgroepen als domeinen, waarbij werkgroepcomputers af en toe worden gebruikt om verbinding te maken met doelcomputers in domeinen en computers in domeinen af en toe worden gebruikt om verbinding te maken met doelcomputers in werkgroepen.</span><span class="sxs-lookup"><span data-stu-id="2df61-232">An administrator must allow users to connect to target computers in an environment that includes both workgroups and domains, where workgroup computers are occasionally used to connect to target computers in domains, and computers in domains are occasionally used to connect to target computers in workgroups.</span></span> <span data-ttu-id="2df61-233">De beheerder heeft een gatewayserver *PswaServer*, in een werkgroep en de doelcomputer *srv1.contoso.com* zich in een domein.</span><span class="sxs-lookup"><span data-stu-id="2df61-233">The administrator has a gateway server, *PswaServer*, in a workgroup; and target computer *srv1.contoso.com* is in a domain.</span></span> <span data-ttu-id="2df61-234">Gebruiker *Chris* is een geautoriseerde lokale gebruiker op zowel de gatewayserver van de werkgroep als de doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-234">User *Chris* is an authorized local user on both the workgroup gateway server and the target computer.</span></span> <span data-ttu-id="2df61-235">Zijn gebruikersnaam op de werkgroepserver is *chrisLocal*; en zijn gebruikersnaam op de doelcomputer is *contoso\\chris*.</span><span class="sxs-lookup"><span data-stu-id="2df61-235">His user name on the workgroup server is *chrisLocal*; and his user name on the target computer is *contoso\\chris*.</span></span> <span data-ttu-id="2df61-236">De beheerder verleent Chris toegang tot srv1.contoso.com door de volgende regel toe te voegen.</span><span class="sxs-lookup"><span data-stu-id="2df61-236">To authorize access to srv1.contoso.com for Chris, the administrator adds the following rule.</span></span>

```powershell
Add-PswaAuthorizationRule -userName PswaServer\chrisLocal `
   -computerName srv1.contoso.com -configurationName Microsoft.PowerShell
```

<span data-ttu-id="2df61-237">Het vorige Regelvoorbeeld wordt voor Chris verificatie op de gatewayserver en vervolgens autoriseert zijn toegang tot *srv1*.</span><span class="sxs-lookup"><span data-stu-id="2df61-237">The preceding rule example authenticates Chris on the gateway server, and then authorizes his access to *srv1*.</span></span> <span data-ttu-id="2df61-238">Op de aanmeldingspagina moet Chris een tweede set referenties in opgeven. de **optionele verbindingsinstellingen** gebied (*contoso\\chris*).</span><span class="sxs-lookup"><span data-stu-id="2df61-238">On the sign-in page, Chris must provide a second set of credentials in the **Optional connection settings** area (*contoso\\chris*).</span></span> <span data-ttu-id="2df61-239">De gateway-server gebruikt de aanvullende set referenties om hem te verifiëren op de doelcomputer *srv1.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="2df61-239">The gateway server uses the additional set of credentials to authenticate him on the target computer, *srv1.contoso.com*.</span></span>

<span data-ttu-id="2df61-240">Windows PowerShell-webtoegang stelt in het voorgaande scenario kan een geslaagde verbinding met de doelcomputer nadat het volgende geslaagd en is toegestaan door ten minste één autorisatieregel is.</span><span class="sxs-lookup"><span data-stu-id="2df61-240">In the preceding scenario, Windows PowerShell Web Access establishes a successful connection to the target computer only after the following have been successful, and allowed by at least one authorization rule.</span></span>

1. <span data-ttu-id="2df61-241">Verificatie op de gatewayserver werkgroep door de naam van een gebruiker toe te voegen in de indeling *servernaam*\\*gebruikersnaam* aan de autorisatieregel</span><span class="sxs-lookup"><span data-stu-id="2df61-241">Authentication on the workgroup gateway server by adding a user name in the format *server_name*\\*user_name* to the authorization rule</span></span>

2. <span data-ttu-id="2df61-242">Verificatie op de doelcomputer met behulp van alternatieve referenties die zijn opgegeven op de pagina aanmelden de **optionele verbindingsinstellingen** gebied</span><span class="sxs-lookup"><span data-stu-id="2df61-242">Authentication on the target computer by using alternate credentials provided on the sign-in page, in the **Optional connection settings** area</span></span>

   > [!NOTE]
   > <span data-ttu-id="2df61-243">Als de gateway en de doelcomputer zich in verschillende werkgroepen of domeinen bevinden, moet een vertrouwensrelatie tussen de twee werkgroepcomputers, de twee domeinen of de werkgroep en het domein worden ingesteld.</span><span class="sxs-lookup"><span data-stu-id="2df61-243">If gateway and target computers are in different workgroups or domains, a trust relationship must be established between the two workgroup computers, the two domains, or between the workgroup and the domain.</span></span> <span data-ttu-id="2df61-244">Deze relatie kan niet worden geconfigureerd met behulp van Windows PowerShell Web Access cmdlets voor autorisatieregels.</span><span class="sxs-lookup"><span data-stu-id="2df61-244">This relationship cannot be configured by using Windows PowerShell Web Access authorization rule cmdlets.</span></span> <span data-ttu-id="2df61-245">Autorisatieregels definiëren geen vertrouwensrelatie tussen computers. Ze kunnen enkel gebruikers toestaan verbinding te maken met specifieke doelcomputers en sessieconfiguraties.</span><span class="sxs-lookup"><span data-stu-id="2df61-245">Authorization rules do not define a trust relationship between computers; they can only authorize users to connect to specific target computers and session configurations.</span></span> <span data-ttu-id="2df61-246">Zie voor meer informatie over het configureren van een vertrouwensrelatie tussen verschillende domeinen [Creating Domain and Forest Trusts](https://technet.microsoft.com/library/cc794775.aspx).</span><span class="sxs-lookup"><span data-stu-id="2df61-246">For more information about how to configure a trust relationship between different domains, see [Creating Domain and Forest Trusts](https://technet.microsoft.com/library/cc794775.aspx).</span></span>
   > <span data-ttu-id="2df61-247">Zie voor meer informatie over hoe u werkgroepcomputers toevoegt aan een lijst met vertrouwde hosts, [extern beheer met Serverbeheer](https://technet.microsoft.com/library/dd759202.aspx).</span><span class="sxs-lookup"><span data-stu-id="2df61-247">For more information about how to add workgroup computers to a trusted hosts list, see [Remote Management with Server Manager](https://technet.microsoft.com/library/dd759202.aspx).</span></span>

### <a name="using-a-single-set-of-authorization-rules-for-multiple-sites"></a><span data-ttu-id="2df61-248">Eén set autorisatieregels gebruiken voor meerdere sites</span><span class="sxs-lookup"><span data-stu-id="2df61-248">Using a single set of authorization rules for multiple sites</span></span>

<span data-ttu-id="2df61-249">Autorisatieregels worden opgeslagen in een XML-bestand.</span><span class="sxs-lookup"><span data-stu-id="2df61-249">Authorization rules are stored in an XML file.</span></span> <span data-ttu-id="2df61-250">De naam van het pad van het XML-bestand is standaard `%windir%\Web\PowershellWebAccess\data\AuthorizationRules.xml`.</span><span class="sxs-lookup"><span data-stu-id="2df61-250">By default, the path name of the XML file is `%windir%\Web\PowershellWebAccess\data\AuthorizationRules.xml`.</span></span>

<span data-ttu-id="2df61-251">Het pad naar het XML-bestand met autorisatieregels wordt opgeslagen in de **powwa.config** -bestand, dat is gevonden in `%windir%\Web\PowershellWebAccess\data`.</span><span class="sxs-lookup"><span data-stu-id="2df61-251">The path to the authorization rules XML file is stored in the **powwa.config** file, which is found in `%windir%\Web\PowershellWebAccess\data`.</span></span> <span data-ttu-id="2df61-252">De beheerder heeft de flexibiliteit om te wijzigen van de verwijzing naar het standaardpad in **powwa.config** op basis van voorkeuren of vereisten.</span><span class="sxs-lookup"><span data-stu-id="2df61-252">The administrator has the flexibility to change the reference to the default path in **powwa.config** to suit preferences or requirements.</span></span> <span data-ttu-id="2df61-253">De beheerder om de locatie van het bestand te wijzigen zodat kunt meerdere Windows PowerShell-webtoegang gateways dezelfde autorisatieregels gebruiken, als een dergelijke configuratie vereist is.</span><span class="sxs-lookup"><span data-stu-id="2df61-253">Allowing the administrator to change the location of the file lets multiple Windows PowerShell Web Access gateways use the same authorization rules, if such a configuration is desired.</span></span>

## <a name="session-management"></a><span data-ttu-id="2df61-254">Sessiebeheer</span><span class="sxs-lookup"><span data-stu-id="2df61-254">Session management</span></span>

<span data-ttu-id="2df61-255">Standaard beperkt Windows PowerShell-webtoegang een gebruiker tot drie sessies tegelijk.</span><span class="sxs-lookup"><span data-stu-id="2df61-255">By default, Windows PowerShell Web Access limits a user to three sessions at one time.</span></span> <span data-ttu-id="2df61-256">U kunt de webtoepassing bewerken **web.config** bestand in IIS-beheer voor de ondersteuning van een ander aantal sessies per gebruiker.</span><span class="sxs-lookup"><span data-stu-id="2df61-256">You can edit the web application's **web.config** file in IIS Manager to support a different number of sessions per user.</span></span> <span data-ttu-id="2df61-257">Het pad naar de **web.config** bestand `$Env:Windir\Web\PowerShellWebAccess\wwwroot\Web.config`.</span><span class="sxs-lookup"><span data-stu-id="2df61-257">The path to the **web.config** file is `$Env:Windir\Web\PowerShellWebAccess\wwwroot\Web.config`.</span></span>

<span data-ttu-id="2df61-258">IIS-webserver is standaard geconfigureerd voor het opnieuw opstarten van de groep van toepassingen als alle instellingen worden bewerkt.</span><span class="sxs-lookup"><span data-stu-id="2df61-258">By default, IIS Web Server is configured to restart the application pool if any settings are edited.</span></span> <span data-ttu-id="2df61-259">Bijvoorbeeld, de groep van toepassingen opnieuw wordt gestart als wijzigingen worden aangebracht in de **web.config** bestand.</span><span class="sxs-lookup"><span data-stu-id="2df61-259">For example, the application pool is restarted if changes are made to the **web.config** file.</span></span> <span data-ttu-id="2df61-260">> omdat **Windows PowerShell-webtoegang** maakt gebruik van de sessiestatus in het geheugen, > gebruikers die zijn aangemeld bij **Windows PowerShell-webtoegang** sessies hun sessie wanneer de groep van toepassingen opnieuw wordt opgestart kwijt.</span><span class="sxs-lookup"><span data-stu-id="2df61-260">>Because **Windows PowerShell Web Access** uses in-memory session states, >users signed in to **Windows PowerShell Web Access** sessions lose their sessions when the application pool is restarted.</span></span>

### <a name="setting-default-parameters-on-the-sign-in-page"></a><span data-ttu-id="2df61-261">Standaardparameters instellen op de aanmeldingspagina</span><span class="sxs-lookup"><span data-stu-id="2df61-261">Setting default parameters on the sign-in page</span></span>

<span data-ttu-id="2df61-262">Als uw Windows PowerShell Web Access-gateway op Windows Server 2012 R2 wordt uitgevoerd, kunt u de standaardwaarden voor de instellingen die worden weergegeven op de aanmeldingspagina van Windows PowerShell-webtoegang configureren.</span><span class="sxs-lookup"><span data-stu-id="2df61-262">If your Windows PowerShell Web Access gateway is running on Windows Server 2012 R2, you can configure default values for the settings that are displayed on the Windows PowerShell Web Access sign-in page.</span></span> <span data-ttu-id="2df61-263">U kunt waarden configureren in de **web.config** -bestand dat wordt beschreven in de vorige paragraaf.</span><span class="sxs-lookup"><span data-stu-id="2df61-263">You can configure values in the **web.config** file that is described in the preceding paragraph.</span></span> <span data-ttu-id="2df61-264">Standaardwaarden voor de instellingen van de aanmeldingspagina vindt u in de **appSettings** sectie van het bestand web.config; Hier volgt een voorbeeld van de **appSettings** sectie.</span><span class="sxs-lookup"><span data-stu-id="2df61-264">Default values for the sign-in page settings are found in the **appSettings** section of the web.config file; the following is an example of the **appSettings** section.</span></span> <span data-ttu-id="2df61-265">Geldige waarden voor veel van deze instellingen zijn hetzelfde als die voor de bijbehorende parameters van de [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) cmdlet in Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2df61-265">Valid values for many of these settings are the same as those for the corresponding parameters of the [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) cmdlet in Windows PowerShell.</span></span>

<span data-ttu-id="2df61-266">Bijvoorbeeld, de `defaultApplicationName` sleutel, zoals wordt weergegeven in het volgende codeblok, is de waarde van de **$PSSessionApplicationName** voorkeursvariabele op de doelcomputer.</span><span class="sxs-lookup"><span data-stu-id="2df61-266">For example, the `defaultApplicationName` key, as shown in the following code block, is the value of the **$PSSessionApplicationName** preference variable on the target computer.</span></span>

```xml
  <appSettings>
      <add key="maxSessionsAllowedPerUser" value="3"/>
      <add key="defaultPortNumber" value="5985"/>
      <add key="defaultSSLPortNumber" value="5986"/>
      <add key="defaultApplicationName" value="WSMAN"/>
      <add key="defaultUseSslSelection" value="0"/>
      <add key="defaultAuthenticationType" value="0"/>
      <add key="defaultAllowRedirection" value="0"/>
      <add key="defaultConfigurationName" value="Microsoft.PowerShell"/>
  </appSettings>
```

### <a name="time-outs-and-unplanned-disconnections"></a><span data-ttu-id="2df61-267">Time-outs en niet-geplande afgebroken sessies</span><span class="sxs-lookup"><span data-stu-id="2df61-267">Time-outs and unplanned disconnections</span></span>

<span data-ttu-id="2df61-268">Er is een time-out opgetreden voor de Windows PowerShell-webtoegang sessies. Een time-outbericht wordt voor aangemelde gebruikers in Windows PowerShell-webtoegang die worden uitgevoerd op Windows Server 2012, weergegeven na 15 minuten van inactiviteit in de sessie.</span><span class="sxs-lookup"><span data-stu-id="2df61-268">Windows PowerShell Web Access sessions time out. In Windows PowerShell Web Access running on Windows Server 2012, A time-out message is displayed to signed-in users after 15 minutes of session inactivity.</span></span> <span data-ttu-id="2df61-269">Als de gebruiker niet reageert binnen vijf minuten nadat het time-outbericht wordt weergegeven, wordt de sessie beëindigd en wordt de gebruiker afgemeld. U kunt de time-outperiode voor sessies wijzigen in de website-instellingen in IIS-beheer.</span><span class="sxs-lookup"><span data-stu-id="2df61-269">If the user does not respond within five minutes after the time-out message is displayed, the session is ended, and the user is signed out. You can change time-out periods for sessions in the website settings in IIS Manager.</span></span>

<span data-ttu-id="2df61-270">In Windows PowerShell-webtoegang uitgevoerd op Windows Server 2012 R2, sessies time-out, standaard na 20 minuten van inactiviteit.</span><span class="sxs-lookup"><span data-stu-id="2df61-270">In Windows PowerShell Web Access running on Windows Server 2012 R2, sessions time out, by default, after 20 minutes of inactivity.</span></span> <span data-ttu-id="2df61-271">Als gebruikers van sessies in de webconsole zijn verbroken vanwege netwerkfouten of andere niet-gepland afsluiten of fouten, en niet omdat ze de sessie zelf hebt gesloten, de Windows PowerShell Web Access-sessies worden uitgevoerd, die zijn verbonden met doelcomputers, totdat de time-outperiode op de client-side-systeem.</span><span class="sxs-lookup"><span data-stu-id="2df61-271">If users are disconnected from sessions in the web-based console because of network errors or other unplanned shutdowns or failures, and not because they have closed the sessions themselves, the Windows PowerShell Web Access sessions continue to run, connected to target computers, until the time-out period on the client side lapses.</span></span> <span data-ttu-id="2df61-272">De sessie wordt beëindigd na de standaardperiode van 20 minuten of na de time-outperiode die is opgegeven door de beheerder van de gateway, afhankelijk van welke periode korter is.</span><span class="sxs-lookup"><span data-stu-id="2df61-272">The session is disconnected after either the default 20 minutes, or after the time-out period specified by the gateway administrator, whichever is shorter.</span></span>

<span data-ttu-id="2df61-273">Als de gateway-server wordt uitgevoerd Windows Server 2012 R2, Windows PowerShell Web Access kunnen gebruikers opnieuw verbinding met maken opgeslagen sessies op een later tijdstip, maar als netwerkfouten, niet-gepland afsluiten of andere fouten sessies verbreken, gebruikers niet zien of opnieuw verbinding maken met opgeslagen sessies pas na de time-outperiode die is opgegeven door de beheerder is opgegeven.</span><span class="sxs-lookup"><span data-stu-id="2df61-273">If the gateway server is running Windows Server 2012 R2, Windows PowerShell Web Access lets users reconnect to saved sessions at a later time, but when network errors, unplanned shutdowns, or other failures disconnect sessions, users cannot see or reconnect to saved sessions until after the time-out period specified by the gateway administrator has lapsed.</span></span>

## <a name="see-also"></a><span data-ttu-id="2df61-274">Zie ook</span><span class="sxs-lookup"><span data-stu-id="2df61-274">See Also</span></span>

<span data-ttu-id="2df61-275">[Installeren en gebruiken van Windows PowerShell-internettoegang](https://technet.microsoft.com/library/hh831611(v=ws.11).aspx)</span><span class="sxs-lookup"><span data-stu-id="2df61-275">[Install and Use Windows PowerShell Web Access](https://technet.microsoft.com/library/hh831611(v=ws.11).aspx)</span></span>

[<span data-ttu-id="2df61-276">about_Session_Configurations</span><span class="sxs-lookup"><span data-stu-id="2df61-276">about_Session_Configurations</span></span>](https://technet.microsoft.com/library/dd819508.aspx)

[<span data-ttu-id="2df61-277">Windows PowerShell Web Access Cmdlets</span><span class="sxs-lookup"><span data-stu-id="2df61-277">Windows PowerShell Web Access Cmdlets</span></span>](cmdlets/web-access-cmdlets.md)
