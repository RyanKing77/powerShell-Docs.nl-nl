---
ms.date: 06/12/2017
keywords: jea, powershell, beveiliging
title: Overwegingen bij de beveiliging van JEA
ms.openlocfilehash: ede727f0f30412d520712d6ba855ba2008375d9a
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 02/03/2019
ms.locfileid: "55687242"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="ad3b8-103">Overwegingen bij de beveiliging van JEA</span><span class="sxs-lookup"><span data-stu-id="ad3b8-103">JEA Security Considerations</span></span>

> <span data-ttu-id="ad3b8-104">Van toepassing op: Windows PowerShell 5.0</span><span class="sxs-lookup"><span data-stu-id="ad3b8-104">Applies to: Windows PowerShell 5.0</span></span>

<span data-ttu-id="ad3b8-105">JEA helpt u bij uw beveiligingspostuur verbeteren door het aantal permanente beheerders op uw virtuele machines te verminderen.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-105">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span>
<span data-ttu-id="ad3b8-106">Dit gebeurt door het maken van een nieuw toegangspunt voor gebruikers voor het beheren van het systeem (een PowerShell-sessie-configuratie) die nauw standaard om te voorkomen dat misbruik wordt vergrendeld.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-106">It does so by creating a new entry point for users to manage the system (a PowerShell session configuration) which is tightly locked down by default to prevent misuse.</span></span>
<span data-ttu-id="ad3b8-107">Gebruikers die sommige, maar niet nodig hebben onbeperkte toegang tot de machine administratieve taken uit te voeren toegang tot de JEA-eindpunt kan worden verleend.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-107">Users who need some, but not unlimited, access to the machine to perform administrative tasks can be granted access to the JEA endpoint.</span></span>
<span data-ttu-id="ad3b8-108">JEA kunnen ze admin-opdrachten uitvoeren zonder rechtstreeks met beheerderstoegang, kunt u vervolgens deze gebruikers verwijderen uit maximaal beschermde-beveiligingsgroepen (zodat ze standaardgebruikers).</span><span class="sxs-lookup"><span data-stu-id="ad3b8-108">Because JEA allows them to run admin commands without directly having admin access, you can then remove those users from highly privileged security groups (make them standard users).</span></span>

<span data-ttu-id="ad3b8-109">Dit onderwerp beschrijft de JEA-beveiligingsmodel en aanbevolen procedures in meer detail.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-109">This topic describes the JEA security model and best practices in more detail.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="ad3b8-110">Uitvoeren als-account</span><span class="sxs-lookup"><span data-stu-id="ad3b8-110">Run As account</span></span>

<span data-ttu-id="ad3b8-111">Elke JEA-eindpunt heeft een aangewezen 'uitvoeren als'-account, dit is het account waarmee de gebruiker verbinding maakt acties worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-111">Each JEA endpoint has a designated "run as" account, which is the account under which the connecting user's actions are performed.</span></span>
<span data-ttu-id="ad3b8-112">Dit account kan worden geconfigureerd in de [sessie configuratiebestand](session-configurations.md), en het account dat u kiest een grote invloed heeft op de beveiliging van uw eindpunt.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-112">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="ad3b8-113">**Virtuele accounts** zijn de aanbevolen manier om de uitvoeren als-account configureren.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-113">**Virtual accounts** are the recommended way of configuring the run as account.</span></span>
<span data-ttu-id="ad3b8-114">Virtuele-accounts zijn eenmalige, tijdelijke lokale accounts die zijn gemaakt voor de gebruiker die de verbinding moet worden gebruikt tijdens de duur van hun JEA-sessie.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-114">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span>
<span data-ttu-id="ad3b8-115">Zodra de sessie wordt beëindigd, wordt de virtuele-account wordt vernietigd en kan niet meer worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-115">As soon as their session is terminated, the virtual account will be destroyed and cannot be used anymore.</span></span>
<span data-ttu-id="ad3b8-116">Gebruiker die de verbinding niet weet de referenties voor de virtuele-account en de virtuele-account niet gebruiken voor toegang tot het systeem via andere middelen, zoals Extern bureaublad of een onbeperkte PowerShell-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-116">The connecting user does not know the credentials for the virtual account and cannot use the virtual account to access the system via other means, such as Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="ad3b8-117">Standaard worden virtuele accounts behoren tot de lokale beheerdersgroep op de machine.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-117">By default, virtual accounts belong to the local administrators group on the machine.</span></span>
<span data-ttu-id="ad3b8-118">Dit biedt ze volledige rechten voor het beheren van alles op het systeem, maar geen rechten voor het beheren van bronnen op het netwerk.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="ad3b8-119">Bij het verifiëren met andere virtuele machines, worden de context van de gebruiker van het account lokale computer, niet op het virtuele account.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-119">When authenticating with other machines, the user context will be that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="ad3b8-120">Domeincontrollers vormen een speciaal geval, omdat er geen concept van een lokale groep administrators.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-120">Domain controllers are a special case since there is no concept of a local administrators group.</span></span>
<span data-ttu-id="ad3b8-121">In plaats daarvan virtuele accounts behoren tot de groep Domeinadministrators in plaats daarvan en de directoryservices op de domeincontroller kunnen beheren.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-121">Instead, virtual accounts belong to Domain Admins instead and can manage the directory services on the domain controller.</span></span>
<span data-ttu-id="ad3b8-122">De domein-identiteit is nog steeds beperkt tot het gebruik van de domeincontroller waar de JEA-sessie is gemaakt, en toegang tot het netwerk wordt weergegeven in plaats daarvan afkomstig zijn van de domain controller computer-object.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-122">The domain identity is still restricted to use on the domain controller where the JEA session was instantiated, and any network access will appear to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="ad3b8-123">In beide gevallen kunt u ook expliciet welke beveiligingsgroepen de virtueel account tot behoren moet definiëren.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-123">In both cases, you can also explicitly define which security groups the virtual account should belong to.</span></span>
<span data-ttu-id="ad3b8-124">Dit is een goede gewoonte wanneer de taak die u uitvoert zonder beheerdersbevoegdheden lokale/domein kan worden gedaan.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-124">This is a good practice when the task you are performing can be done without local/domain admin privileges.</span></span>
<span data-ttu-id="ad3b8-125">Als u al een beveiligingsgroep die is gedefinieerd voor uw beheerders hebt, kunt u gewoon het lidmaatschap van de virtueel account verlenen aan die groep wijs hieraan de machtigingen die nodig zijn.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-125">If you already have a security group defined for your admins, you can simply grant the virtual account membership to that group to give it the permissions it needs.</span></span>
<span data-ttu-id="ad3b8-126">Virtueel accountlidmaatschap is beperkt tot lokale beveiligingsgroepen op werkstations en lidservers, maar op een domeincontroller ze kunnen alleen leden van de domein-beveiligingsgroepen.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-126">Virtual account group membership is limited to local security groups on workstation and member servers, but on a domain controller they can only be members of domain security groups.</span></span>
<span data-ttu-id="ad3b8-127">Wanneer u een of meer beveiligingsgroepen voor de virtuele-account om u te behoren tot opgeeft, wordt deze niet meer behoren tot de standaard-groepen (lokale beheerder of domeinbeheerder).</span><span class="sxs-lookup"><span data-stu-id="ad3b8-127">Once you specify one or more security groups for the virtual account to belong to, it will no longer belong to the default groups (local admin or domain admin).</span></span>

<span data-ttu-id="ad3b8-128">De onderstaande tabel bevat een overzicht van de mogelijke configuratie-opties en de resulterende machtigingen voor virtuele accounts</span><span class="sxs-lookup"><span data-stu-id="ad3b8-128">The table below summarizes the possible configuration options and resulting permissions for virtual accounts</span></span>

<span data-ttu-id="ad3b8-129">Het computertype</span><span class="sxs-lookup"><span data-stu-id="ad3b8-129">Computer type</span></span>                | <span data-ttu-id="ad3b8-130">Configuratie van virtueel account</span><span class="sxs-lookup"><span data-stu-id="ad3b8-130">Virtual account group configuration</span></span> | <span data-ttu-id="ad3b8-131">Lokale gebruikerscontext</span><span class="sxs-lookup"><span data-stu-id="ad3b8-131">Local user context</span></span>                                      | <span data-ttu-id="ad3b8-132">Netwerk-gebruikerscontext</span><span class="sxs-lookup"><span data-stu-id="ad3b8-132">Network user context</span></span>
-----------------------------|-------------------------------------|---------------------------------------------------------|--------------------------------------------------
<span data-ttu-id="ad3b8-133">Domeincontroller</span><span class="sxs-lookup"><span data-stu-id="ad3b8-133">Domain controller</span></span>            | <span data-ttu-id="ad3b8-134">Standaard</span><span class="sxs-lookup"><span data-stu-id="ad3b8-134">Default</span></span>                             | <span data-ttu-id="ad3b8-135">Domeingebruiker, lid van '*domein*\Domain beheerders</span><span class="sxs-lookup"><span data-stu-id="ad3b8-135">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="ad3b8-136">Computeraccount</span><span class="sxs-lookup"><span data-stu-id="ad3b8-136">Computer account</span></span>
<span data-ttu-id="ad3b8-137">Domeincontroller</span><span class="sxs-lookup"><span data-stu-id="ad3b8-137">Domain controller</span></span>            | <span data-ttu-id="ad3b8-138">Domeingroepen A en B</span><span class="sxs-lookup"><span data-stu-id="ad3b8-138">Domain groups A and B</span></span>               | <span data-ttu-id="ad3b8-139">Domeingebruiker, lid van '*domein*\A ','*domein*\B'</span><span class="sxs-lookup"><span data-stu-id="ad3b8-139">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="ad3b8-140">Computeraccount</span><span class="sxs-lookup"><span data-stu-id="ad3b8-140">Computer account</span></span>
<span data-ttu-id="ad3b8-141">Lidserver of werkstation</span><span class="sxs-lookup"><span data-stu-id="ad3b8-141">Member server or workstation</span></span> | <span data-ttu-id="ad3b8-142">Standaard</span><span class="sxs-lookup"><span data-stu-id="ad3b8-142">Default</span></span>                             | <span data-ttu-id="ad3b8-143">Lokale gebruiker, lid van '*BUILTIN*\Administrators'</span><span class="sxs-lookup"><span data-stu-id="ad3b8-143">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="ad3b8-144">Computeraccount</span><span class="sxs-lookup"><span data-stu-id="ad3b8-144">Computer account</span></span>
<span data-ttu-id="ad3b8-145">Lidserver of werkstation</span><span class="sxs-lookup"><span data-stu-id="ad3b8-145">Member server or workstation</span></span> | <span data-ttu-id="ad3b8-146">Lokale groepen C en D</span><span class="sxs-lookup"><span data-stu-id="ad3b8-146">Local groups C and D</span></span>                | <span data-ttu-id="ad3b8-147">Lokale gebruiker, lid van '*COMPUTER*\C' en '*COMPUTER*\D'</span><span class="sxs-lookup"><span data-stu-id="ad3b8-147">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="ad3b8-148">Computeraccount</span><span class="sxs-lookup"><span data-stu-id="ad3b8-148">Computer account</span></span>

<span data-ttu-id="ad3b8-149">Wanneer u gebeurtenissen voor beveiligingscontrole en gebeurtenislogboeken van toepassing bekijkt, ziet u dat elke gebruikerssessie JEA een unieke virtueel account is.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-149">When you look at security audit events and application event logs, you will see that each JEA user session has a unique virtual account.</span></span>
<span data-ttu-id="ad3b8-150">Zo kunt u het bijhouden van acties in een JEA-eindpunt van de gebruiker terug naar de oorspronkelijke gebruiker die de opdracht uitvoert.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-150">This helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span>
<span data-ttu-id="ad3b8-151">Virtueel account namen worden als volgt de indeling ' WinRM virtuele gebruikers\\WinRM\_VA\_*ACCOUNTNUMBER*\_*domein* \_ *sAMAccountName*' als gebruiker 'Els' in domein "Contoso" opnieuw wordt opgestart een service in een JEA-eindpunt, de gebruikersnaam die is gekoppeld aan de service control manager gebeurtenissen zou bijvoorbeeld ' WinRM virtuele gebruikers\\WinRM\_ Evaluatie van beveiligingsproblemen\_1\_contoso\_Els '.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-151">Virtual account names follow the format "WinRM Virtual Users\\WinRM\_VA\_*ACCOUNTNUMBER*\_*DOMAIN*\_*sAMAccountName*" For example, if user "Alice" in domain "Contoso" restarts a service in a JEA endpoint, the username associated with any service control manager events would be "WinRM Virtual Users\\WinRM\_VA\_1\_contoso\_alice".</span></span>


<span data-ttu-id="ad3b8-152">**Groep beheerde serviceaccounts (gmsa's)** zijn nuttig wanneer een lidserver moet toegang hebben tot netwerkbronnen in de JEA-sessie.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-152">**Group managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span>
<span data-ttu-id="ad3b8-153">Een voorbeeld van de use-case voor dit is een JEA-eindpunt dat wordt gebruikt voor het beheren van toegang tot een REST-API die wordt gehost op een andere computer.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-153">An example use case for this is a JEA endpoint that is used to control access to a REST API hosted on a different machine.</span></span>
<span data-ttu-id="ad3b8-154">Het is gemakkelijk om te schrijven functies om de gewenste aanroepen in de REST-API, maar om te kunnen verifiëren met de API die u moeten een netwerk-id.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-154">It is easy to write functions to make the desired invocations on the REST API, but in order to authenticate with the API you need a network identity.</span></span>
<span data-ttu-id="ad3b8-155">Met behulp van een groep beheerd serviceaccount, maakt het 'tweede hop' mogelijk terwijl nog steeds controle over welke computers de account kunnen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-155">Using a group managed service account makes the "second hop" possible while still having control over which computers can use the account.</span></span>
<span data-ttu-id="ad3b8-156">De effectieve machtigingen van de gMSA worden gedefinieerd door de beveiligingsgroepen (lokaal of domein) waarbij het gMSA-account hoort.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-156">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="ad3b8-157">Wanneer een JEA-eindpunt is geconfigureerd om een gMSA-account te gebruiken, verschijnt de acties van gebruikers met alle JEA afkomstig zijn van dezelfde groep beheerd serviceaccount.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-157">When a JEA endpoint is configured to use a gMSA account, the actions of all JEA users will appear to come from the same group managed service account.</span></span>
<span data-ttu-id="ad3b8-158">De enige manier kunt u acties terug naar een specifieke gebruiker traceren is het identificeren van de reeks opdrachten uitvoeren in de tekst van een PowerShell-sessie.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-158">The only way you can trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="ad3b8-159">**-Passthrough referenties** worden gebruikt wanneer u niet opgeven van een uitvoeren als-account en wilt dat PowerShell-opdrachten uitvoeren op de externe server met referenties van de gebruiker van het maken van verbinding.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-159">**Pass-thru credentials** are used when you do not specify a run as account and want PowerShell to use the connecting user's credential to run commands on the remote server.</span></span>
<span data-ttu-id="ad3b8-160">Deze configuratie is *niet* voor JEA aanbevolen als u de verbindende gebruikers direct toegang geven tot privileged beheergroepen zou moeten.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-160">This configuration is *not* recommended for JEA as it would require you to grant the connecting user direct access to privileged management groups.</span></span>
<span data-ttu-id="ad3b8-161">Als gebruiker die de verbinding is al beheerdersbevoegdheden, kunnen ze helemaal te voorkomen dat JEA en beheren van het systeem via andere, onbeperkte betekent.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-161">If the connecting user already has admin privileges, they can avoid JEA altogether and manage the system via other, unconstrained means.</span></span>
<span data-ttu-id="ad3b8-162">Zie het gedeelte hieronder voor het [JEA biedt geen bescherming tegen beheerders](#jea-does-not-protect-against-admins) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-162">See the section below on how [JEA does not protect against admins](#jea-does-not-protect-against-admins) for more information.</span></span>

<span data-ttu-id="ad3b8-163">**Standaard uitvoeren als-accounts** kunt u opgeven van een gebruikersaccount op waaronder de volledige PowerShell-sessie wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-163">**Standard run as accounts** allow you to specify any user account under which the entire PowerShell session will run.</span></span>
<span data-ttu-id="ad3b8-164">Dit is een belangrijke onderscheidende factor zijn, omdat een sessieconfiguratie ingesteld voor het gebruik van een vaste uitvoeren als-account (met de `-RunAsCredential` parameter) is niet JEA-bewust.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-164">This is an important distinction, because a session configuration set to use a fixed run as account (with the `-RunAsCredential` parameter) is not JEA-aware.</span></span>
<span data-ttu-id="ad3b8-165">Dit betekent dat dat roldefinities niet langer werken zoals verwacht, en elke gebruiker die is gemachtigd voor toegang tot het eindpunt wordt dezelfde rol worden toegewezen.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-165">That means that role definitions no longer function as expected, and every user authorized to access the endpoint will be assigned the same role.</span></span>

<span data-ttu-id="ad3b8-166">U moet een RunAsCredential niet gebruiken op een JEA-eindpunt vanwege de problemen bij het traceren van acties terug naar specifieke gebruikers en het ontbreken van ondersteuning voor het toewijzen van gebruikers aan rollen.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-166">You should not use a RunAsCredential on a JEA endpoint because of the difficulty in tracing actions back to specific users and the lack of support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="ad3b8-167">WinRM ACL voor eindpunten</span><span class="sxs-lookup"><span data-stu-id="ad3b8-167">WinRM Endpoint ACL</span></span>

<span data-ttu-id="ad3b8-168">Omdat elke JEA-eindpunt met de reguliere PowerShell remoting eindpunten, een afzonderlijke toegangsbeheerlijst (ACL) instellen in de WinRM-configuratie die bepaalt kunnen die worden geverifieerd met de JEA-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-168">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) set in the WinRM configuration that controls who can authenticate with the JEA endpoint.</span></span>
<span data-ttu-id="ad3b8-169">Als u niet goed geconfigureerd, vertrouwde gebruikers wellicht geen toegang hebben tot de JEA-eindpunt en/of niet-vertrouwde gebruikers toegang kunnen krijgen.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-169">If improperly configured, trusted users may not be able to access the JEA endpoint and/or untrusted users may gain access.</span></span>
<span data-ttu-id="ad3b8-170">De WinRM-ACL beïnvloedt echter niet zo is, de toewijzing van gebruikers aan rollen JEA.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-170">The WinRM ACL does not, however, affect the mapping of users to JEA roles.</span></span>
<span data-ttu-id="ad3b8-171">Die wordt beheerd door de *RoleDefinitions* veld in het configuratiebestand van de sessie die is geregistreerd op het systeem.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-171">That is controlled by the *RoleDefinitions* field in the session configuration file that was registered on the system.</span></span>

<span data-ttu-id="ad3b8-172">Standaard, wanneer u een JEA-eindpunt met behulp van een sessie-configuratiebestand als een of meer rolmogelijkheden, registreert wordt de WinRM-ACL worden geconfigureerd dat alle gebruikers toe te wijzen aan een of meer rollen toegang tot het eindpunt.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-172">By default, when you register a JEA endpoint using a session configuration file and one or more role capabilities, the WinRM ACL will be configured to allow all users mapping to one or more roles access to the endpoint.</span></span>
<span data-ttu-id="ad3b8-173">Bijvoorbeeld, een JEA-sessie die is geconfigureerd met behulp van de volgende opdrachten wordt volledige toegang verlenen tot *CONTOSO\JEA\_Lev1* en *CONTOSO\JEA\_Lev2*.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-173">For example, a JEA session configured using the following commands will grant full access to *CONTOSO\JEA\_Lev1* and *CONTOSO\JEA\_Lev2*.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="ad3b8-174">U kunt controleren de machtigingen van de gebruiker met de [Get-PSSessionConfiguration](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-174">You can audit user permissions with the [Get-PSSessionConfiguration](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
PS C:\> Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission

Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="ad3b8-175">Als u wilt wijzigen welke gebruikers toegang hebben, voer een `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` voor een interactieve prompt of `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` om bij te werken van de machtigingen.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-175">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span>
<span data-ttu-id="ad3b8-176">Gebruikers moeten ten minste *Invoke* rechten voor toegang tot de JEA-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-176">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="ad3b8-177">Als extra gebruikers toegang tot de JEA-eindpunt krijgen, maar niet in een van de rollen die zijn gedefinieerd in het configuratiebestand van de sessie vallen, worden ze wel een JEA-sessie starten, maar hebben alleen toegang tot de standaard-cmdlets.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-177">If additional users are granted access to the JEA endpoint but do not fall into any of the roles defined in the session configuration file, they will be able to start a JEA session but only have access to the default cmdlets.</span></span>
<span data-ttu-id="ad3b8-178">U kunt de machtigingen van de gebruiker in een JEA-eindpunt controleren door te voeren `Get-PSSessionCapability`.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-178">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span>
<span data-ttu-id="ad3b8-179">Bekijk de [controle en rapportage over JEA](audit-and-report.md) artikel voor meer informatie over het controleren van opdrachten van een gebruiker die toegang heeft tot in een JEA-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-179">Check out the [Auditing and Reporting on JEA](audit-and-report.md) article for more information about auditing which commands a user has access to in a JEA endpoint.</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="ad3b8-180">Minimale bevoegdheid rollen</span><span class="sxs-lookup"><span data-stu-id="ad3b8-180">Least privilege roles</span></span>

<span data-ttu-id="ad3b8-181">Bij het ontwerpen van JEA-functies, is het belangrijk om te weten dat de virtuele of een groep beheerde service-account die wordt uitgevoerd op de achtergrond vaak onbeperkte toegang tot het beheer van de lokale computer is.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-181">When designing JEA roles, it is important to remember that the virtual or group managed service account running behind the scenes often has unrestricted access to manage the local machine.</span></span>
<span data-ttu-id="ad3b8-182">Rolmogelijkheden JEA te beperken wat dat account kan worden gebruikt door het beperken van de opdrachten en toepassingen die kunnen worden uitgevoerd met behulp van die beschermde context.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-182">JEA role capabilities help restrict what that account can be used for by limiting the commands and applications that can be run using that privileged context.</span></span>
<span data-ttu-id="ad3b8-183">Niet goed ontworpen rollen kunt gevaarlijke opdrachten die een gebruiker kan verbreken buiten de grenzen van de JEA of toegang krijgen tot gevoelige informatie.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-183">Improperly designed roles can allow dangerous commands to run that may allow a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="ad3b8-184">Bijvoorbeeld, houd rekening met de volgende vermelding van de rol-mogelijkheid:</span><span class="sxs-lookup"><span data-stu-id="ad3b8-184">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="ad3b8-185">De mogelijkheid van deze rol kan gebruikers een PowerShell-cmdlet uitvoeren met het zelfstandig naamwoord 'Proces' van de module Microsoft.PowerShell.Management.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-185">This role capability allows users to run any PowerShell cmdlet with the noun "Process" from the Microsoft.PowerShell.Management module.</span></span>
<span data-ttu-id="ad3b8-186">Gebruikers mogelijk toegang tot cmdlets, zoals `Get-Process` om te begrijpen welke toepassingen worden uitgevoerd op het systeem en `Stop-Process` afsluiten een vastgelopen toepassingen.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-186">Users may need to access cmdlets like `Get-Process` to understand what applications are running on the system and `Stop-Process` to kill any hung applications.</span></span>
<span data-ttu-id="ad3b8-187">Deze post ook kan echter `Start-Process`, die kan worden gebruikt om een willekeurige programma met volledige beheerdersrechten worden opgestart.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-187">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span>
<span data-ttu-id="ad3b8-188">Het programma niet moet lokaal op het systeem worden geïnstalleerd, zodat een kwaadwillende persoon kan een programma te starten op een bestandsshare waarmee de verbindende gebruiker lokale beheerdersbevoegdheden en schadelijke software wordt uitgevoerd.'</span><span class="sxs-lookup"><span data-stu-id="ad3b8-188">The program doesn't need to be installed locally on the system, so an adversary could simply start a program on a file share that gives the connecting user local admin privileges, runs malware, and more.'</span></span>

<span data-ttu-id="ad3b8-189">Een beter beveiligde versie van deze dezelfde rol mogelijkheid zou er als volgt uitzien:</span><span class="sxs-lookup"><span data-stu-id="ad3b8-189">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="ad3b8-190">Vermijd het gebruik van jokertekens in rolmogelijkheden en zorg ervoor dat u [controleren de machtigingen van de effectieve gebruikersnaam](audit-and-report.md#check-effective-rights-for-a-specific-user) regelmatig om te begrijpen welke opdrachten van een gebruiker toegang heeft tot.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-190">Avoid using wildcards in role capabilities, and be sure to [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) regularly to understand which commands a user has access to.</span></span>

## <a name="jea-does-not-protect-against-admins"></a><span data-ttu-id="ad3b8-191">JEA biedt geen bescherming tegen beheerders</span><span class="sxs-lookup"><span data-stu-id="ad3b8-191">JEA does not protect against admins</span></span>

<span data-ttu-id="ad3b8-192">Een van de belangrijkste principes van JEA is dat het niet-beheerders om uit te voeren kunt *sommige* beheertaken.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-192">One of the core principles of JEA is that it allows non-admins to perform *some* admin tasks.</span></span>
<span data-ttu-id="ad3b8-193">JEA biedt geen bescherming tegen mensen die al administrator-bevoegdheden hebt.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-193">JEA does not protect against those who already have administrator privileges.</span></span>
<span data-ttu-id="ad3b8-194">Gebruikers die deel uitmaken van 'Domeinadministrators', 'lokale admins', of andere maximaal beschermde groepen in uw omgeving worden nog steeds de JEA-beveiligingen als u zich aanmeldt bij de computer via een andere manier wordt omzeild.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-194">Users who belong "domain admins," "local admins," or other highly privileged groups in your environment will still be able to get around JEA's protections by signing into the machine via another means.</span></span>
<span data-ttu-id="ad3b8-195">Ze kunnen, bijvoorbeeld: Meld u aan met RDP, externe MMC-consoles gebruiken of verbinding maken met onbeperkte PowerShell-eindpunten.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-195">They could, for example, sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span>
<span data-ttu-id="ad3b8-196">Lokale beheerders op het systeem kunt JEA configuraties zodat andere gebruikers te beheren van het systeem of te wijzigen van de mogelijkheid van een rol om uit te breiden het bereik van wat een gebruiker in hun sessie JEA doen kan ook wijzigen.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-196">Local admins on the system can also modify JEA configurations to allow additional users to manage the system or change a role capability to extend the scope of what a user can do in their JEA session.</span></span>
<span data-ttu-id="ad3b8-197">Daarom is het belangrijk om te bepalen van uw gebruikers JEA uitgebreide machtigingen om te zien of er andere manieren kan ook bevoegde toegang tot het systeem.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-197">It is therefore important to evaluate your JEA users' extended permissions to see if there are other ways they could gain privileged access to the system.</span></span>

<span data-ttu-id="ad3b8-198">Een normaal worden bij gebruik van JEA voor reguliere dagelijks onderhoud en hebben een 'just in time' in beschermde modus beheeroplossing toegang toestaan dat gebruikers tijdelijk worden lokale beheerders in noodsituaties.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-198">A common practice is to use JEA for regular day-to-day maintenance and have a "just in time" privileged access management solution allow users to temporarily become local admins in emergency situations.</span></span>
<span data-ttu-id="ad3b8-199">Dit zorgt ervoor gebruikers zijn geen permanente beheerders op het systeem, maar deze rechten kunnen krijgen als en alleen wanneer ze een werkstroom die documenten van hun gebruik van deze machtigingen hebt voltooid.</span><span class="sxs-lookup"><span data-stu-id="ad3b8-199">This helps ensure users are not permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>