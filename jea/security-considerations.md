---
ms.date: 07/10/2019
keywords: jea, powershell, beveiliging
title: Overwegingen bij de beveiliging van JEA
ms.openlocfilehash: befc24fec368c4f6d60477daf63bf17e9431133e
ms.sourcegitcommit: 46bebe692689ebedfe65ff2c828fe666b443198d
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/10/2019
ms.locfileid: "67726580"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="b6b6b-103">Overwegingen bij de beveiliging van JEA</span><span class="sxs-lookup"><span data-stu-id="b6b6b-103">JEA Security Considerations</span></span>

<span data-ttu-id="b6b6b-104">JEA helpt u bij uw beveiligingspostuur verbeteren door het aantal permanente beheerders op uw virtuele machines te verminderen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-104">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="b6b6b-105">JEA maakt gebruik van de configuratie van een PowerShell-sessie te maken van een nieuw toegangspunt voor gebruikers voor het beheren van het systeem.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-105">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="b6b6b-106">Gebruikers met verhoogde bevoegdheden, maar niet onbeperkte toegang nodig tot de machine administratieve taken uitvoeren, kunnen de toegang tot de JEA-eindpunt worden verleend.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-106">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="b6b6b-107">Aangezien JEA kan deze gebruikers admin-opdrachten uitvoeren zonder de volledige functionaliteit voor beheerderstoegang hebben, kunt u vervolgens die gebruikers verwijderen uit maximaal beschermde-beveiligingsgroepen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-107">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="b6b6b-108">Run As-account</span><span class="sxs-lookup"><span data-stu-id="b6b6b-108">Run-As account</span></span>

<span data-ttu-id="b6b6b-109">Elke JEA-eindpunt heeft een aangewezen **run as** account.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-109">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="b6b6b-110">Dit is het account waarmee de gebruiker verbinding maakt acties worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-110">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="b6b6b-111">Dit account kan worden geconfigureerd in de [sessie configuratiebestand](session-configurations.md), en het account dat u kiest een grote invloed heeft op de beveiliging van uw eindpunt.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-111">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="b6b6b-112">**Virtuele accounts** zijn de aanbevolen manier van het configureren van de **run as** account.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-112">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="b6b6b-113">Virtuele-accounts zijn eenmalige, tijdelijke lokale accounts die zijn gemaakt voor de gebruiker die de verbinding moet worden gebruikt tijdens de duur van hun JEA-sessie.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-113">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="b6b6b-114">Zodra de sessie wordt beëindigd, wordt de virtuele-account wordt vernietigd en kan niet meer worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-114">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="b6b6b-115">De gebruiker die verbinding maakt weten niet de referenties voor de virtuele-account.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-115">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="b6b6b-116">De virtuele-account kan niet worden gebruikt voor toegang tot het systeem via andere middelen, zoals Extern bureaublad of een onbeperkte PowerShell-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-116">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="b6b6b-117">Standaard virtuele accounts deel uitmaken van de lokale **beheerders** groep op de machine.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-117">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="b6b6b-118">Dit biedt ze volledige rechten voor het beheren van alles op het systeem, maar geen rechten voor het beheren van bronnen op het netwerk.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="b6b6b-119">Bij het verifiëren met andere virtuele machines, is de context van de gebruiker die van het account lokale computer, niet op het virtuele account.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-119">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="b6b6b-120">Domeincontrollers vormen een speciaal geval, omdat er geen lokale **beheerders** groep.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-120">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="b6b6b-121">In plaats daarvan virtuele accounts behoren tot **Domeinadministrators** en de directoryservices op de domeincontroller kan beheren.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-121">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="b6b6b-122">De domein-id is nog steeds beperkt voor gebruik op de domeincontroller waar de JEA-sessie is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-122">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="b6b6b-123">Toegang tot het netwerk wordt weergegeven in plaats daarvan afkomstig zijn van de domain controller computer-object.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-123">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="b6b6b-124">In beide gevallen kan u uitdrukkelijk welke beveiligingsgroepen de virtueel account tot behoort definiëren.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-124">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="b6b6b-125">Dit is een goede gewoonte wanneer de taak kan worden uitgevoerd zonder een lokale of domeintoegang beheerdersbevoegdheden.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-125">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="b6b6b-126">Als u al een beveiligingsgroep die is gedefinieerd voor uw beheerders hebt, verleent u het accountlidmaatschap van de virtuele-aan die groep.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-126">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="b6b6b-127">Virtueel accountlidmaatschap is beperkt tot lokale beveiligingsgroepen op werkstations en lidservers.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-127">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="b6b6b-128">Op domeincontrollers moeten virtuele accounts lid van domein-beveiligingsgroepen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-128">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="b6b6b-129">Zodra de virtuele-account is toegevoegd aan een of meer beveiligingsgroepen, worden deze niet meer behoort tot de standaard-groepen (lokaal of domeinbeheerder beheerders).</span><span class="sxs-lookup"><span data-stu-id="b6b6b-129">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="b6b6b-130">De volgende tabel geeft een overzicht van de mogelijke configuratie-opties en de resulterende machtigingen voor virtuele accounts:</span><span class="sxs-lookup"><span data-stu-id="b6b6b-130">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="b6b6b-131">Het computertype</span><span class="sxs-lookup"><span data-stu-id="b6b6b-131">Computer type</span></span>         | <span data-ttu-id="b6b6b-132">Configuratie van virtueel account</span><span class="sxs-lookup"><span data-stu-id="b6b6b-132">Virtual account group configuration</span></span> |                   <span data-ttu-id="b6b6b-133">Lokale gebruikerscontext</span><span class="sxs-lookup"><span data-stu-id="b6b6b-133">Local user context</span></span>                    | <span data-ttu-id="b6b6b-134">Netwerk-gebruikerscontext</span><span class="sxs-lookup"><span data-stu-id="b6b6b-134">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="b6b6b-135">Domeincontroller</span><span class="sxs-lookup"><span data-stu-id="b6b6b-135">Domain controller</span></span>            | <span data-ttu-id="b6b6b-136">Standaard</span><span class="sxs-lookup"><span data-stu-id="b6b6b-136">Default</span></span>                             | <span data-ttu-id="b6b6b-137">Domeingebruiker, lid van '*domein*\Domain beheerders</span><span class="sxs-lookup"><span data-stu-id="b6b6b-137">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="b6b6b-138">Computeraccount</span><span class="sxs-lookup"><span data-stu-id="b6b6b-138">Computer account</span></span>     |
| <span data-ttu-id="b6b6b-139">Domeincontroller</span><span class="sxs-lookup"><span data-stu-id="b6b6b-139">Domain controller</span></span>            | <span data-ttu-id="b6b6b-140">Domeingroepen A en B</span><span class="sxs-lookup"><span data-stu-id="b6b6b-140">Domain groups A and B</span></span>               | <span data-ttu-id="b6b6b-141">Domeingebruiker, lid van '*domein*\A ','*domein*\B'</span><span class="sxs-lookup"><span data-stu-id="b6b6b-141">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="b6b6b-142">Computeraccount</span><span class="sxs-lookup"><span data-stu-id="b6b6b-142">Computer account</span></span>     |
| <span data-ttu-id="b6b6b-143">Lidserver of werkstation</span><span class="sxs-lookup"><span data-stu-id="b6b6b-143">Member server or workstation</span></span> | <span data-ttu-id="b6b6b-144">Standaard</span><span class="sxs-lookup"><span data-stu-id="b6b6b-144">Default</span></span>                             | <span data-ttu-id="b6b6b-145">Lokale gebruiker, lid van '*BUILTIN*\Administrators'</span><span class="sxs-lookup"><span data-stu-id="b6b6b-145">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="b6b6b-146">Computeraccount</span><span class="sxs-lookup"><span data-stu-id="b6b6b-146">Computer account</span></span>     |
| <span data-ttu-id="b6b6b-147">Lidserver of werkstation</span><span class="sxs-lookup"><span data-stu-id="b6b6b-147">Member server or workstation</span></span> | <span data-ttu-id="b6b6b-148">Lokale groepen C en D</span><span class="sxs-lookup"><span data-stu-id="b6b6b-148">Local groups C and D</span></span>                | <span data-ttu-id="b6b6b-149">Lokale gebruiker, lid van '*COMPUTER*\C' en '*COMPUTER*\D'</span><span class="sxs-lookup"><span data-stu-id="b6b6b-149">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="b6b6b-150">Computeraccount</span><span class="sxs-lookup"><span data-stu-id="b6b6b-150">Computer account</span></span>     |

<span data-ttu-id="b6b6b-151">Wanneer u gebeurtenissen voor beveiligingscontrole en gebeurtenislogboeken van toepassing bekijkt, ziet u dat elke gebruikerssessie JEA een unieke virtueel account is.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-151">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="b6b6b-152">Deze unieke account helpt u bij het bijhouden van acties in een JEA-eindpunt van de gebruiker terug naar de oorspronkelijke gebruiker die de opdracht uitvoert.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-152">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="b6b6b-153">Virtueel account namen worden als volgt de indeling `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` bijvoorbeeld, als gebruiker **Els** in domein **Contoso** een service wordt opnieuw opgestart in een JEA-eindpunt, de gebruikersnaam die is gekoppeld aan een servicebesturingsbeheer gebeurtenissen zijn `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-153">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="b6b6b-154">**Groep beheerde serviceaccounts (gmsa's)** zijn nuttig wanneer een lidserver moet toegang hebben tot netwerkbronnen in de JEA-sessie.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-154">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="b6b6b-155">Bijvoorbeeld, wanneer een JEA-eindpunt wordt gebruikt voor het beheren van toegang tot een REST-API-service die wordt gehost op een andere computer.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-155">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="b6b6b-156">Het is eenvoudig om functies voor het aanroepen van de REST API's te schrijven, maar u moet een netwerk-id om te verifiëren met de API.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-156">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="b6b6b-157">Met behulp van een groep beheerde serviceaccount, maakt de tweede hop mogelijk behoud van controle over welke computers de account kunnen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-157">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="b6b6b-158">De effectieve machtigingen van de gMSA worden gedefinieerd door de beveiligingsgroepen (lokaal of domein) waarbij het gMSA-account hoort.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-158">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="b6b6b-159">Wanneer een JEA-eindpunt is geconfigureerd voor gebruik van een gMSA, worden de acties van alle gebruikers van JEA afkomstig zijn van de dezelfde gMSA weergegeven.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-159">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="b6b6b-160">De enige manier om tracering acties terug naar een specifieke gebruiker is het identificeren van de reeks opdrachten uitvoeren in de tekst van een PowerShell-sessie.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-160">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="b6b6b-161">**-Passthrough referenties** worden gebruikt wanneer u geen opgeeft een **run as** account.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-161">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="b6b6b-162">PowerShell maakt gebruik van referenties van de gebruiker van het maken van verbinding opdrachten uitvoeren op de externe server.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-162">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="b6b6b-163">Hiervoor moet u de verbindende gebruikers direct toegang geven tot privileged-beheergroepen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-163">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="b6b6b-164">Deze configuratie is **niet** aanbevolen voor JEA.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-164">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="b6b6b-165">Als gebruiker die de verbinding is al beheerdersbevoegdheden, kunnen ze JEA voorkomen en het systeem via andere, onbeperkte manier beheren.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-165">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="b6b6b-166">Zie de sectie hieronder voor meer informatie over hoe u [JEA niet beschermd tegen beheerders](#jea-doesnt-protect-against-admins).</span><span class="sxs-lookup"><span data-stu-id="b6b6b-166">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="b6b6b-167">**Standaard run as-accounts** kunt u opgeven van een gebruikersaccount waarmee de volledige PowerShell-sessie wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-167">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="b6b6b-168">Met behulp van sessieconfiguraties vaste **run as** accounts (met de `-RunAsCredential` parameter) worden niet op de JEA-hoogte.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-168">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="b6b6b-169">Roldefinities niet langer werken zoals verwacht.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-169">Role definitions no longer function as expected.</span></span> <span data-ttu-id="b6b6b-170">Elke gebruiker die is gemachtigd voor toegang tot het eindpunt is dezelfde rol toegewezen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-170">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="b6b6b-171">U mag niet een **RunAsCredential** op een JEA-eindpunt omdat het is moeilijk te traceren acties aan specifieke gebruikers en aanmeldingsbasis wordt de ondersteuning voor het toewijzen van gebruikers aan rollen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-171">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="b6b6b-172">WinRM ACL voor eindpunten</span><span class="sxs-lookup"><span data-stu-id="b6b6b-172">WinRM Endpoint ACL</span></span>

<span data-ttu-id="b6b6b-173">Omdat elke JEA-eindpunt met de reguliere PowerShell remoting eindpunten, een afzonderlijke toegangsbeheerlijst (ACL) die bepaalt kunnen die worden geverifieerd met de JEA-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-173">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="b6b6b-174">Als u niet goed geconfigureerd, vertrouwde gebruikers wellicht geen toegang hebben tot de JEA-eindpunt en niet-vertrouwde gebruikers mogelijk toegang heeft.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-174">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="b6b6b-175">De WinRM-ACL niet van invloed op de toewijzing van gebruikers aan rollen JEA.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-175">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="b6b6b-176">Toewijzing wordt bepaald door de **RoleDefinitions** veld in het configuratiebestand van de sessie die is gebruikt voor het registreren van het eindpunt.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-176">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="b6b6b-177">Wanneer een JEA-eindpunt meerdere rolmogelijkheden heeft, wordt de ACL WinRM standaard geconfigureerd voor toegang tot alle toegewezen gebruikers.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-177">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="b6b6b-178">Bijvoorbeeld, een JEA-sessie die is geconfigureerd met behulp van de volgende opdrachten, hebben volledige toegang tot `CONTOSO\JEA_Lev1` en `CONTOSO\JEA_Lev2`.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-178">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="b6b6b-179">U kunt controleren de machtigingen van de gebruiker met de [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-179">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="b6b6b-180">Als u wilt wijzigen welke gebruikers toegang hebben, voer een `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` voor een interactieve prompt of `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` om bij te werken van de machtigingen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-180">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="b6b6b-181">Gebruikers moeten ten minste *Invoke* rechten voor toegang tot de JEA-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-181">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="b6b6b-182">Het is mogelijk te maken van een JEA-eindpunt dat een bepaalde rol niet is toegewezen aan elke gebruiker die toegang heeft.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-182">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="b6b6b-183">Deze gebruikers kunnen een JEA-sessie starten, maar hebben alleen toegang tot de standaard-cmdlets.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-183">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="b6b6b-184">U kunt de machtigingen van de gebruiker in een JEA-eindpunt controleren door te voeren `Get-PSSessionCapability`.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-184">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="b6b6b-185">Zie voor meer informatie, [controle en rapportage over JEA](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="b6b6b-185">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="b6b6b-186">Minimale bevoegdheid rollen</span><span class="sxs-lookup"><span data-stu-id="b6b6b-186">Least privilege roles</span></span>

<span data-ttu-id="b6b6b-187">Bij het ontwerpen van JEA-functies, is het belangrijk om te weten dat de virtuele en groep beheerde serviceaccounts die achter de schermen kunnen hebben onbeperkte toegang tot de lokale computer.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-187">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="b6b6b-188">Rolmogelijkheden JEA te beperken van de opdrachten en toepassingen die kunnen worden uitgevoerd in die beschermde context.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-188">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="b6b6b-189">Niet goed ontworpen rollen kunt gevaarlijke opdrachten die kunnen toestaan dat een gebruiker buiten de grenzen van de JEA opsplitsen of toegang krijgen tot gevoelige informatie.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-189">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="b6b6b-190">Bijvoorbeeld, houd rekening met de volgende vermelding van de rol-mogelijkheid:</span><span class="sxs-lookup"><span data-stu-id="b6b6b-190">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="b6b6b-191">De mogelijkheid van deze rol kan gebruikers een PowerShell-cmdlet uitvoeren met het zelfstandig naamwoord **proces** uit de **Microsoft.PowerShell.Management** module.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-191">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="b6b6b-192">Gebruikers mogelijk toegang tot cmdlets, zoals `Get-Process` om te zien welke toepassingen worden uitgevoerd op het systeem en `Stop-Process` afsluiten van toepassingen die worden niet meer reageert.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-192">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="b6b6b-193">Deze post ook kan echter `Start-Process`, die kan worden gebruikt om een willekeurige programma met volledige beheerdersrechten worden opgestart.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-193">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="b6b6b-194">Het programma moet niet lokaal worden geïnstalleerd op het systeem.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-194">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="b6b6b-195">Een gebruiker verbinding kan een programma start vanuit een bestandsshare die u geeft de gebruiker lokale beheerdersbevoegdheden, malware en meer worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-195">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="b6b6b-196">Een beter beveiligde versie van deze dezelfde rol mogelijkheid zou er als volgt uitzien:</span><span class="sxs-lookup"><span data-stu-id="b6b6b-196">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="b6b6b-197">Vermijd het gebruik van jokertekens in rolmogelijkheden.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-197">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="b6b6b-198">Zorg ervoor dat regelmatig [controleren de machtigingen van de effectieve gebruikersnaam](audit-and-report.md#check-effective-rights-for-a-specific-user) om te begrijpen welke opdrachten zijn toegankelijk voor de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-198">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="b6b6b-199">JEA biedt geen bescherming tegen beheerders</span><span class="sxs-lookup"><span data-stu-id="b6b6b-199">JEA doesn't protect against admins</span></span>

<span data-ttu-id="b6b6b-200">Een van de belangrijkste principes van JEA is dat niet-beheerders bepaalde beheertaken doen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-200">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="b6b6b-201">JEA biedt geen bescherming tegen gebruikers die al administrator-bevoegdheden hebben.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-201">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="b6b6b-202">Gebruikers die deel uitmaken van **Domeinadministrators**, lokale **beheerders**, of andere maximaal beschermde groepen van JEA-beveiligingen via een andere manier kunnen omzeilen.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-202">Users who belong **Domain Admins**, local **Administrators**, or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="b6b6b-203">Ze kunnen bijvoorbeeld, meld u aan met RDP, externe MMC-consoles gebruiken of verbinding maken met onbeperkte PowerShell-eindpunten.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-203">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="b6b6b-204">Lokale beheerders op een systeem Wijzig ook JEA-configuraties om te kunnen extra gebruikers of wijzig de mogelijkheid van een rol om uit te breiden het bereik van wat een gebruiker in de JEA-sessie doen kan.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-204">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="b6b6b-205">Het is belangrijk om te evalueren van uw gebruikers JEA uitgebreide machtigingen om te zien of er andere manieren om bevoegde toegang te krijgen tot het systeem.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-205">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="b6b6b-206">Normaal worden JEA voor reguliere dagelijks onderhoud en een just-in-time, de beheeroplossing voor bevoegde toegang waarmee gebruikers tijdelijk worden lokale beheerders in noodsituaties.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-206">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="b6b6b-207">Dit zorgt ervoor gebruikers zijn niet permanente beheerders op het systeem, maar deze rechten kunnen krijgen als en alleen wanneer ze een werkstroom die documenten van hun gebruik van deze machtigingen hebt voltooid.</span><span class="sxs-lookup"><span data-stu-id="b6b6b-207">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>
